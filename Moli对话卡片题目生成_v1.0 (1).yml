app:
  description: ÈÄöËøáÂ∑•‰ΩúÊµÅËá™Âä®ÁîüÊàêÂØπËØùÂç°ÁâáÈ¢òÁõÆÂÜÖÂÆπ
  icon: ü§ñ
  icon_background: '#FFEAD5'
  mode: workflow
  name: MoliÂØπËØùÂç°ÁâáÈ¢òÁõÆÁîüÊàê_v1.0
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.1.0@539dc0dde8ecaa84e61b8eeb154c3bb7fbc9caa80afd83763dd5860a725d2742
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 200
        batch_count_limit: 900
        file_size_limit: 200
        image_file_size_limit: 200
        video_file_size_limit: 200
        workflow_file_upload_limit: 900
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: start
        targetType: if-else
      id: 1753336166559-source-1753339672847-target
      selected: false
      source: '1753336166559'
      sourceHandle: source
      target: '1753339672847'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: start
        targetType: if-else
      id: 1753336166559-source-17533396760860-target
      selected: false
      source: '1753336166559'
      sourceHandle: source
      target: '17533396760860'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: start
        targetType: if-else
      id: 1753336166559-source-17533396767300-target
      selected: false
      source: '1753336166559'
      sourceHandle: source
      target: '17533396767300'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: start
        targetType: if-else
      id: 1753336166559-source-17533396773730-target
      selected: false
      source: '1753336166559'
      sourceHandle: source
      target: '17533396773730'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 17533396773730-true-1753339886438-target
      selected: false
      source: '17533396773730'
      sourceHandle: 'true'
      target: '1753339886438'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: start
        targetType: if-else
      id: 1753336166559-source-1753341814322-target
      selected: false
      source: '1753336166559'
      sourceHandle: source
      target: '1753341814322'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: template-transform
      id: 1753342022306-source-1753342086794-target
      selected: false
      source: '1753342022306'
      sourceHandle: source
      target: '1753342086794'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: template-transform
        targetType: llm
      id: 1753342086794-source-1753342493873-target
      selected: false
      source: '1753342086794'
      sourceHandle: source
      target: '1753342493873'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: template-transform
      id: 1753342493873-source-1753342707768-target
      selected: false
      source: '1753342493873'
      sourceHandle: source
      target: '1753342707768'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 1753341814322-true-1753346134162-target
      selected: false
      source: '1753341814322'
      sourceHandle: 'true'
      target: '1753346134162'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: template-transform
        targetType: llm
      id: 17533461952642-source-1753351512925-target
      selected: false
      source: '17533461952642'
      sourceHandle: source
      target: '1753351512925'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: template-transform
      id: 1753351512925-source-17533461952645-target
      selected: false
      source: '1753351512925'
      sourceHandle: source
      target: '17533461952645'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 17533396767300-true-1753351954442-target
      selected: false
      source: '17533396767300'
      sourceHandle: 'true'
      target: '1753351954442'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: template-transform
      id: 1753352030500-source-17536688854790-target
      selected: false
      source: '1753352030500'
      sourceHandle: source
      target: '17536688854790'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: template-transform
        targetType: llm
      id: 17536688854790-source-17536688927820-target
      selected: false
      source: '17536688854790'
      sourceHandle: source
      target: '17536688927820'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: template-transform
      id: 17536688927820-source-17536688996950-target
      selected: false
      source: '17536688927820'
      sourceHandle: source
      target: '17536688996950'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1753351954442-source-1753352030500-target
      selected: false
      source: '1753351954442'
      sourceHandle: source
      target: '1753352030500'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 17533396760860-true-1753671925489-target
      selected: false
      source: '17533396760860'
      sourceHandle: 'true'
      target: '1753671925489'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1753671925489-source-1753672356709-target
      selected: false
      source: '1753671925489'
      sourceHandle: source
      target: '1753672356709'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: template-transform
      id: 1753672356709-source-1753672437742-target
      selected: false
      source: '1753672356709'
      sourceHandle: source
      target: '1753672437742'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: template-transform
        targetType: llm
      id: 1753672437742-source-17536724640920-target
      selected: false
      source: '1753672437742'
      sourceHandle: source
      target: '17536724640920'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: template-transform
      id: 17536724640920-source-17536724676350-target
      selected: false
      source: '17536724640920'
      sourceHandle: source
      target: '17536724676350'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: llm
      id: 1753339672847-true-1753673016249-target
      selected: false
      source: '1753339672847'
      sourceHandle: 'true'
      target: '1753673016249'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1753673016249-source-1753673086906-target
      selected: false
      source: '1753673016249'
      sourceHandle: source
      target: '1753673086906'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: template-transform
      id: 1753673086906-source-1753673197346-target
      selected: false
      source: '1753673086906'
      sourceHandle: source
      target: '1753673197346'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: template-transform
        targetType: llm
      id: 1753673197346-source-1753673132811-target
      selected: false
      source: '1753673197346'
      sourceHandle: source
      target: '1753673132811'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: template-transform
      id: 1753673132811-source-17536732746160-target
      selected: false
      source: '1753673132811'
      sourceHandle: source
      target: '17536732746160'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1753346134162-source-1753759688876-target
      selected: false
      source: '1753346134162'
      sourceHandle: source
      target: '1753759688876'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: template-transform
      id: 1753759688876-source-17533461952642-target
      selected: false
      source: '1753759688876'
      sourceHandle: source
      target: '17533461952642'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1753339886438-source-1753342022306-target
      selected: false
      source: '1753339886438'
      sourceHandle: source
      target: '1753342022306'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: template-transform
        targetType: end
      id: 17536732746160-source-1754286021242-target
      source: '17536732746160'
      sourceHandle: source
      target: '1754286021242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: template-transform
        targetType: end
      id: 17536724676350-source-1754286021242-target
      source: '17536724676350'
      sourceHandle: source
      target: '1754286021242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: template-transform
        targetType: end
      id: 17536688996950-source-1754286021242-target
      source: '17536688996950'
      sourceHandle: source
      target: '1754286021242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: template-transform
        targetType: end
      id: 1753342707768-source-1754286021242-target
      source: '1753342707768'
      sourceHandle: source
      target: '1754286021242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: template-transform
        targetType: end
      id: 17533461952645-source-1754286021242-target
      source: '17533461952645'
      sourceHandle: source
      target: '1754286021242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: end
      id: 1753339672847-false-1754286021242-target
      source: '1753339672847'
      sourceHandle: 'false'
      target: '1754286021242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: end
      id: 17533396760860-false-1754286021242-target
      source: '17533396760860'
      sourceHandle: 'false'
      target: '1754286021242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: end
      id: 17533396767300-false-1754286021242-target
      source: '17533396767300'
      sourceHandle: 'false'
      target: '1754286021242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: end
      id: 17533396773730-false-1754286021242-target
      source: '17533396773730'
      sourceHandle: 'false'
      target: '1754286021242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: end
      id: 1753341814322-false-1754286021242-target
      source: '1753341814322'
      sourceHandle: 'false'
      target: '1754286021242'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: ÂºÄÂßã
        type: start
        variables:
        - label: topic
          max_length: 192
          options: []
          required: true
          type: text-input
          variable: topic
        - label: level
          max_length: 48
          options:
          - '1'
          - '2'
          - '3'
          - '4'
          - '5'
          - '6'
          required: true
          type: select
          variable: level
        - label: num_questions_type_10
          max_length: 48
          options: []
          required: true
          type: number
          variable: num_questions_type_10
        - label: num_questions_type_11
          max_length: 48
          options: []
          required: true
          type: number
          variable: num_questions_type_11
        - label: num_questions_type_12
          max_length: 48
          options: []
          required: true
          type: number
          variable: num_questions_type_12
        - label: num_questions_type_13
          max_length: 48
          options: []
          required: true
          type: number
          variable: num_questions_type_13
        - label: num_questions_type_14
          max_length: 48
          options: []
          required: true
          type: number
          variable: num_questions_type_14
        - label: cid
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: cid
      height: 272
      id: '1753336166559'
      position:
        x: 69.07888662360529
        y: 414.6135195705076
      positionAbsolute:
        x: 69.07888662360529
        y: 414.6135195705076
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: '>'
            id: 414ba01c-3fbe-4da1-906c-1389e899a22f
            value: '0'
            varType: number
            variable_selector:
            - '1753336166559'
            - num_questions_type_10
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: Èü≥È¢ëÈÖçÂØπ
        type: if-else
      height: 126
      id: '1753339672847'
      position:
        x: 488
        y: -15.646998365909838
      positionAbsolute:
        x: 488
        y: -15.646998365909838
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: '>'
            id: 1872f4d0-aa6e-4f8b-af68-7aebe87f4db1
            value: '0'
            varType: number
            variable_selector:
            - '1753336166559'
            - num_questions_type_11
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: ÂØπËØùÁêÜËß£
        type: if-else
      height: 126
      id: '17533396760860'
      position:
        x: 488
        y: 266
      positionAbsolute:
        x: 488
        y: 266
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: '>'
            id: 407e9a9e-7142-4bf4-a41e-d998e9043347
            value: '0'
            varType: number
            variable_selector:
            - '1753336166559'
            - num_questions_type_12
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: Âê¨Èü≥ÈáçÁªÑ
        type: if-else
      height: 126
      id: '17533396767300'
      position:
        x: 488
        y: 563.5681117423045
      positionAbsolute:
        x: 488
        y: 563.5681117423045
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: '>'
            id: bc82919e-2ca1-4bd8-bc69-a9fc2abc07ba
            value: '0'
            varType: number
            variable_selector:
            - '1753336166559'
            - num_questions_type_13
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: ÈÄâÊã©Â∫îÁ≠î
        type: if-else
      height: 126
      id: '17533396773730'
      position:
        x: 488
        y: 853.4182911836281
      positionAbsolute:
        x: 488
        y: 853.4182911836281
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 243c4091-01b6-4227-af77-b4db7ec9f1b0
          role: system
          text: "# ËßíËâ≤\nÊÇ®ÊòØ‰∏Ä‰ΩçÁ≤æÈÄö‰∏≠Ëã±ÂèåËØ≠ÁöÑÂÑøÁ´•Ëã±ËØ≠ÊïôÂ≠¶‰∏ìÂÆ∂ÔºåÂ∞§ÂÖ∂ÊìÖÈïø‰∏∫3-12Â≤ÅÁöÑÂ≠©Â≠êËÆæËÆ°‰∫íÂä®ÂºèÂØπËØùÂ≠¶‰π†Âú∫ÊôØ„ÄÇ\n\n# ‰ªªÂä°\nËØ∑Ê†πÊçÆÁî®Êà∑ËæìÂÖ•ÁöÑ\
            \ **ËØùÈ¢ò ({{{{#1753336166559.topic#}}}})**„ÄÅ**Ëã±ËØ≠Ê∞¥Âπ≥ ({{{{#1753336166559.level#}}}})**\
            \ Âíå **ÁîüÊàêÊï∞Èáè ({{{{#1753336166559.num_questions_type_13#}}}})**ÔºåÂàõ‰ΩúÂá∫ÊåáÂÆöÊï∞ÈáèÁöÑ„ÄÅÂÆåÊï¥ÁöÑÁÆÄÁü≠Ëã±ËØ≠ÂØπËØùÂú∫ÊôØ„ÄÇ\n\
            \n# Âú∫ÊôØË¶ÅÊ±Ç\nÊØè‰∏™Âú∫ÊôØÂøÖÈ°ªÂåÖÂê´Ôºö\n1.  **ÂØπËØùÂÜÖÂÆπ (dialogue_turns)**Ôºö‰∏Ä‰∏™ÂåÖÂê´Â§öËΩÆÂØπËØùÁöÑÂàóË°®ÔºåÊØèËΩÆÂØπËØùÈúÄÊåáÊòéËØ¥ËØù‰∫∫Ôºà‰æãÂ¶Ç\
            \ \"Speaker A\", \"Speaker B\"ÔºâÂíåÂØπËØùÂÜÖÂÆπ„ÄÇ\n2.  **Ê≠£Á°ÆÂõûÂ§ç (correct_option)**ÔºöÈíàÂØπÂØπËØùÊÉÖÊôØÔºåÂ≠¶‰π†ËÄÖÂ∫îËØ•ÂÅöÂá∫ÁöÑÂîØ‰∏ÄÊ≠£Á°ÆÂõûÁ≠î„ÄÇ\n\
            3.  **Âπ≤Êâ∞È°π (distractor_options)**ÔºöÊèê‰æõ‰∏Ä‰∏™Á¨¶ÂêàËØ≠Â¢É‰ΩÜÈÄªËæë‰∏çÊ≠£Á°ÆÁöÑÂπ≤Êâ∞ÈÄâÈ°π„ÄÇ\n4.  **ÂØπ‰∫éËã±ËØ≠Ê∞¥Âπ≥ÔºàlevelÔºâÁöÑÂÆö‰πâ**Ôºö\n\
            \  - Level 1ÔºöËÉΩÁêÜËß£Â∏∏ËßÅËØçÊ±á‰∏éÂü∫Êú¨Êåá‰ª§\n  - Level 2ÔºöËÉΩËøõË°åÈóÆÂÄô„ÄÅËá™Êàë‰ªãÁªç„ÄÅË°®ËææÂñúÂ•Ω\n  - Level 3ÔºöÂèØÁî®ÂÆåÊï¥Âè•ÂûãÊèèËø∞Êó•Â∏∏ÊÉÖÂ¢É\n\
            \  - Level 4ÔºöËÉΩÂõ¥ÁªïÁÜüÊÇâËØùÈ¢òËøõË°åËøûË¥ØË°®Ëææ\n  - Level 5ÔºöË°®ËææËæÉ‰∏∫ÊµÅÁïÖÔºåËÉΩË°®ËææËßÇÁÇπÂíåÁêÜËß£‰∏ÄËà¨ÊñáÊú¨\n  - Level\
            \ 6ÔºöËÉΩËøõË°åÊó•Â∏∏‰∫§ÊµÅ‰∏éÂü∫Á°Ä‰π¶Èù¢Ë°®Ëææ\n\n# Âº∫Âà∂ËßÑÂàôÔºàMANDATORY RULESÔºâ\n- ÂØπËØùÂÜÖÂÆπÔºà`line`Â≠óÊÆµÔºâ**ÂøÖÈ°ª**ÊòØÂåÖÂê´Ëá≥Â∞ë3‰∏™ÂçïËØçÁöÑ„ÄÅÊúâÊÑè‰πâÁöÑËã±ÊñáÂè•Â≠ê„ÄÇ\n\
            - **‰∏•Á¶ÅÔºàSTRICTLY FORBIDDENÔºâ** Âú®`line`Â≠óÊÆµ‰∏≠ËæìÂá∫Á©∫Â≠óÁ¨¶‰∏≤Ôºà\"\"ÔºâÊàñÊó†ÊÑè‰πâÁöÑÂç†‰ΩçÁ¨¶„ÄÇ\n- ‰∏•Ê†ºÊåâÁÖß‰∏ãÈù¢Á§∫‰æãÁöÑJSONÊ†ºÂºèËæìÂá∫Ôºå‰∏çË¶ÅÊ∑ªÂä†‰ªª‰ΩïÈ¢ùÂ§ñÁöÑËß£Èáä„ÄÇ\n\
            \n# ËæìÂá∫Ê†ºÂºè\nËØ∑ËæìÂá∫‰∏Ä‰∏™Ê†áÂáÜ JSON ÂØπË±°ÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∏Ä‰∏™Âêç‰∏∫ `scenarios` ÁöÑÊï∞ÁªÑ„ÄÇ\n\n## Á§∫‰æãËæìÂá∫ (ËæìÂÖ•: topic=\"\
            ÊâìËΩ¶\", level=\"Level 3\", card_quantity=1)\n{\n  \"scenarios\": [\n   \
            \ {\n      \"dialogue_turns\": [\n        {\n          \"speaker\": \"\
            Child\",\n          \"line\": \"Mom, how do we get a taxi?\"\n       \
            \ },\n        {\n          \"speaker\": \"Mother\",\n          \"line\"\
            : \"We can call one or just wave our hand.\"\n        }\n      ],\n  \
            \    \"correct_option\": \"Let's wave our hand!\",\n      \"distractor_options\"\
            : [\n        \"Let's go home.\"\n      ]\n    }\n  ]\n}"
        selected: false
        title: ÂØπËØùÂú∫ÊôØÁîüÊàê
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753339886438'
      position:
        x: 902.0493841724706
        y: 884.803049107735
      positionAbsolute:
        x: 902.0493841724706
        y: 884.803049107735
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: '>'
            id: 792c5c34-f1ed-4af2-86df-563810707f6d
            value: '0'
            varType: number
            variable_selector:
            - '1753336166559'
            - num_questions_type_14
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: Âè£ËØ≠Â∫îÁ≠î
        type: if-else
      height: 126
      id: '1753341814322'
      position:
        x: 488
        y: 1122.5324415614411
      positionAbsolute:
        x: 488
        y: 1122.5324415614411
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import random\nimport time\nimport json\n\ndef main(llm_string_output:\
          \ str) -> dict:\n    processed_scenarios = []\n    \n    # 1. Áõ¥Êé•Ëß£ÊûêÊù•Ëá™LLMËäÇÁÇπÁöÑÂéüÂßãÂ≠óÁ¨¶‰∏≤ËæìÂá∫\n\
          \    try:\n        data = json.loads(llm_string_output)\n        scenarios_list\
          \ = data.get(\"scenarios\", [])\n    except json.JSONDecodeError:\n    \
          \    return {\"error\": f\"Input string is not a valid JSON. Content: {llm_string_output}\"\
          , \"processed_scenarios\": []}\n\n    if not scenarios_list:\n        return\
          \ {\"error\": \"No scenarios found in the parsed JSON.\", \"processed_scenarios\"\
          : []}\n\n    # 2. Âæ™ÁéØÂ§ÑÁêÜÊØè‰∏Ä‰∏™Âú∫ÊôØ\n    for scenario in scenarios_list:\n     \
          \   try:\n            # 2a. Â∞ÜÂØπËØùÂÜÖÂÆπÂ§ÑÁêÜÊàêÊñ∞ÁöÑ question ÂàóË°®Ê†ºÂºè\n            dialogue_turns\
          \ = scenario.get(\"dialogue_turns\", [])\n            formatted_question_list\
          \ = []\n            speaker_map = {}\n            for i, turn in enumerate(dialogue_turns):\n\
          \                speaker = turn.get(\"speaker\")\n                if speaker\
          \ not in speaker_map:\n                    role = \"left_girl\" if len(speaker_map)\
          \ % 2 == 0 else \"right_girl\"\n                    speaker_map[speaker]\
          \ = role\n\n                formatted_question_list.append({\n         \
          \           \"role\": speaker_map[speaker],\n                    \"type\"\
          : \"eng_cn_audio\",\n                    \"eng\": turn.get(\"line\", \"\"\
          ),\n                    \"audio_url\": True\n                })\n      \
          \      \n            # 2b. Â§ÑÁêÜÈÄâÊã©È¢òÈÄâÈ°πÔºàÊ∑∑Âêà„ÄÅÊâì‰π±„ÄÅÂàÜÈÖçKeyÔºâ\n            correct_text\
          \ = scenario.get(\"correct_option\") # Ê≥®ÊÑèÔºöËøôÈáåÁî®ÁöÑÊòØ correct_optionÔºå‰∏çÊòØ‰∏≠Êñá\n  \
          \          distractor_options_text = scenario.get(\"distractor_options\"\
          , [])\n            all_options_text = [correct_text] + distractor_options_text\n\
          \            random.shuffle(all_options_text)\n            \n          \
          \  final_options = []\n            answer_key = \"\"\n            for i,\
          \ text in enumerate(all_options_text):\n                key = chr(65 + i)\n\
          \                option_data = {\"key\": key, \"type\": \"text\", \"text\"\
          : text}\n                final_options.append(option_data)\n           \
          \     if text == correct_text:\n                    answer_key = key\n \
          \           \n            # 2c. ÊâìÂåÖÊàêÊúÄÁªàÁöÑ‚ÄúÂçäÊàêÂìÅ‚ÄùÊï∞ÊçÆ\n            processed_scenario\
          \ = {\n                \"question_turns\": formatted_question_list,\n  \
          \              \"dialogue_turns_text_only\": dialogue_turns,\n         \
          \       \"question_for_user\": scenario.get(\"question_for_user\", \"ÈÄâÊã©ÂêàÈÄÇÁöÑÂõûÂ§ç\"\
          ),\n                \"answer_key\": answer_key,\n                \"options\"\
          : final_options\n            }\n            processed_scenarios.append(processed_scenario)\n\
          \n        except Exception as e:\n            print(f\"Error processing\
          \ a scenario: {e}\")\n            continue\n            \n    return {\"\
          processed_scenarios\": processed_scenarios}"
        code_language: python3
        desc: ''
        outputs:
          processed_scenarios:
            children: null
            type: array[object]
        selected: false
        title: ÈÄâÈ°πÂ§ÑÁêÜ‰∏éÈáçÁªÑ
        type: code
        variables:
        - value_selector:
          - '1753339886438'
          - text
          variable: llm_string_output
      height: 54
      id: '1753342022306'
      position:
        x: 1328.8658129030878
        y: 884.803049107735
      positionAbsolute:
        x: 1328.8658129030878
        y: 884.803049107735
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: "{% for scenario in processed_scenarios %}\n{\n    \"template\"\
          : \"t000010\",\n    \"remark\": \"ÈÄâÊã©Â∫îÁ≠î\",\n    \"type\":\"J\",\n    \"topic_id\"\
          :\"{{ cid }}\",\n    \"topic\":\"{{ topic }}\",\n    \"level\":\"{{ level\
          \ }}\",\n    \"vocabulary_group\":\"A\",\n    \"question\": [\n        {#\
          \ Êñ∞Â¢ûÁöÑÂæ™ÁéØÔºåÁî®‰∫éÁîüÊàêÊØè‰∏ÄÂè•ÂØπËØù #}\n        {% for turn in scenario['question_turns']\
          \ %}\n        {\n            \"role\": \"{{ turn['role'] }}\",\n       \
          \     \"type\": \"eng_cn_audio\",\n            \"eng\": \"{{ turn['eng']\
          \ | e }}\",\n            \"audio_url\": true\n        }{% if not loop.last\
          \ %},{% endif %}\n        {% endfor %}\n    ],\n    \"title\": \"{{ scenario['question_for_user']\
          \ | default('ÈÄâÊã©ÂêàÈÄÇÁöÑÂõûÂ§ç', true) }}\", \n    \"title_position\": 2, \n    \"\
          answer_type\": \"text\", \n    \"answer\": \"{{ scenario['answer_key'] }}\"\
          , \n    \"answer_input\": \"radio\", \n    \"options\": [\n        {% for\
          \ option in scenario['options'] %}\n        {\n            \"key\": \"{{\
          \ option['key'] }}\",\n            \"type\": \"text\",\n            \"text\"\
          : \"{{ option['text'] | e }}\"\n        }{% if not loop.last %},{% endif\
          \ %}\n        {% endfor %}\n    ]\n}\n{% if not loop.last %},{% endif %}\n\
          {% endfor %}"
        title: ÁîüÊàêÊúÄÁªàJSON 4
        type: template-transform
        variables:
        - value_selector:
          - '1753342022306'
          - processed_scenarios
          variable: processed_scenarios
        - value_selector:
          - '1753336166559'
          - topic
          value_type: string
          variable: topic
        - value_selector:
          - '1753336166559'
          - level
          value_type: string
          variable: level
        - value_selector:
          - '1753336166559'
          - cid
          value_type: string
          variable: cid
      height: 54
      id: '1753342086794'
      position:
        x: 1667.8211984834427
        y: 884.5104374650145
      positionAbsolute:
        x: 1667.8211984834427
        y: 884.5104374650145
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 1072fafb-9760-4a13-854b-0b9c4bb99339
          role: system
          text: "# ËßíËâ≤\nÊÇ®ÊòØ‰∏ÄÂêç‰∏ì‰∏öÁöÑAIÂ∫îÁî®JSONÊ†ºÂºèÊ†°È™å‰∏ìÂÆ∂„ÄÇ\n\n# ‰ªªÂä°\nËØ∑ÂØπËæìÂÖ•ÁöÑJSONÊï∞ÊçÆ ({{{{#1753342086794.output#}}}})\
            \ ËøõË°å‰∏•Ê†ºÁöÑÁªìÊûÑÂíåÈÄªËæëÊ†°È™å„ÄÇ\n\n# Ê†°È™åËßÑÂàô\n1.  **È°∂Á∫ßÂ≠óÊÆµ**: ÂøÖÈ°ªÂ≠òÂú® `template`, `remark`, `question`,\
            \ `title`, `answer`, `options`„ÄÇ\n2.  **question Êï∞ÁªÑ**:\n    - ÂøÖÈ°ªÊòØÂåÖÂê´‰∏Ä‰∏™ÂØπË±°ÁöÑÊï∞ÁªÑ„ÄÇ\n\
            \    - ÂØπË±°ÂÜÖÂøÖÈ°ªÂåÖÂê´ `conversation_id`(ÈùûÁ©∫Â≠óÁ¨¶‰∏≤), `audio_start`(Â≠óÁ¨¶‰∏≤), `audio_end`(Â≠óÁ¨¶‰∏≤),\
            \ `message_start`(Â≠óÁ¨¶‰∏≤), `message_end`(Â≠óÁ¨¶‰∏≤), `show_conversation_text`(\"\
            True\"Êàñ\"False\"Â≠óÁ¨¶‰∏≤)„ÄÇ\n3.  **answer Â≠óÊÆµ**:\n    - `answer` ÁöÑÂÄºÔºàÂ¶Ç \"A\"ÔºâÂøÖÈ°ªÊòØ\
            \ `options` Êï∞ÁªÑ‰∏≠Êüê‰∏™ÂÖÉÁ¥†ÁöÑ `key` ÂÄº„ÄÇ\n4.  **options Êï∞ÁªÑ**:\n    - ÂøÖÈ°ªÊòØ‰∏Ä‰∏™ÈùûÁ©∫Êï∞ÁªÑ„ÄÇ\n\
            \    - ÊØè‰∏™ÂÖÉÁ¥†ÂøÖÈ°ªÂåÖÂê´ `key`(Â§ßÂÜôÂ≠óÊØçÂ≠óÁ¨¶‰∏≤) Âíå `text`(ÈùûÁ©∫Â≠óÁ¨¶‰∏≤)„ÄÇ\n    - `key` ÁöÑÂÄºÂú®Êï∞ÁªÑÂÜÖÂøÖÈ°ªÊòØÂîØ‰∏ÄÁöÑ„ÄÇ\n\
            \n# ËæìÂá∫Ë¶ÅÊ±Ç\nËøîÂõûÊ†áÂáÜJSONÊ†ºÂºèÁªìÊûúÔºåÂåÖÂê´ `is_valid` (bool) Âíå `error_details` (array)„ÄÇÂ¶ÇÊûúÊó†ÊïàÔºåËØ∑Âú®\
            \ `error_details` ‰∏≠ËØ¶ÁªÜËØ¥Êòé‰∏çÁ¨¶ÂêàËßÑÂàôÁöÑÂú∞Êñπ„ÄÇ"
        selected: false
        title: È¢òÁõÆÂáÜÁ°ÆÊÄßÊ†°È™å
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753342493873'
      position:
        x: 2009.2604710189908
        y: 884.803049107735
      positionAbsolute:
        x: 2009.2604710189908
        y: 884.803049107735
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: "{% for scenario in processed_scenarios %}\n## ‚ùè Âç°ÁâáÂÆ°Ê†∏Ê∏ÖÂçï (ÂØπËØùÈÄâÊã©)\n\
          \n---\n\n### **1. Âü∫Êú¨‰ø°ÊÅØ**\n\n- **ÂØπËØùID**: `{{ scenario.conversation_id }}`\n\
          - **Ê®°ÊùøÁ±ªÂûã**: `t000010` (ÈÄâÊã©Â∫îÁ≠î)\n\n### **2. ÂØπËØùÂÜÖÂÆπÈ¢ÑËßà**\n\n{# ‰ΩøÁî®ÊñπÊã¨Âè∑ ['line'] Êù•Êõø‰ª£\
          \ .line #}\n{% for turn in scenario.dialogue_turns_text_only %}\n- **{{\
          \ turn['speaker'] }}**: {{ turn['line'] }}\n{% endfor %}\n\n### **3. Áî®Êà∑‰ªªÂä°‰∏éÈÄâÈ°π**\n\
          \n- **‰ªªÂä°Ê†áÈ¢ò**: ÈÄâÊã©ÂêàÈÄÇÁöÑÂõûÂ§ç\n- **ÈÄâÈ°πÂàóË°®**:\n{# ‰∏∫‰øùÊåÅÈ£éÊ†ºÁªü‰∏ÄÔºåËøôÈáå‰πü‰ΩøÁî®ÊñπÊã¨Âè∑ #}\n{% for option\
          \ in scenario.options %}\n  - **[{{ option['key'] }}]**: {{ option['text']\
          \ }}{% if option['key'] == scenario.answer_key %}  **<-- ‚úÖ Ê≠£Á°ÆÁ≠îÊ°à**{% endif\
          \ %}\n{% endfor %}\n\n### **4. Á≥ªÁªüÂà§ÂÆö**\n- **Ê≠£Á°ÆÁ≠îÊ°àKey**: `{{ scenario.answer_key\
          \ }}`\n\n{% if not loop.last %}\n\n========================================\n\
          \n{% endif %}\n{% endfor %}"
        title: ‰∫∫Â∑•ÂÆ°Ê†∏Ê†ºÂºèËΩ¨Êç¢-13
        type: template-transform
        variables:
        - value_selector:
          - '1753342022306'
          - processed_scenarios
          variable: processed_scenarios
      height: 54
      id: '1753342707768'
      position:
        x: 2328.156505206653
        y: 884.803049107735
      positionAbsolute:
        x: 2328.156505206653
        y: 884.803049107735
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 62e3ca54-85dc-46e1-9386-1e5ea025fc45
          role: system
          text: "# ËßíËâ≤\nÊÇ®ÊòØ‰∏Ä‰ΩçÈ°∂Á∫ßÁöÑÂÑøÁ´•Ëã±ËØ≠ÊïôÂ≠¶ÂÜÖÂÆπËÆæËÆ°Â∏àÔºå‰∏ìÊ≥®‰∫éÂàõËÆæËÉΩÊøÄÂèëÂ≠©Â≠êÂºÄÂè£ËØ¥ËØùÁöÑÊ≤âÊµ∏ÂºèÂØπËØùÂú∫ÊôØ„ÄÇ\n\n# ‰ªªÂä°\nËØ∑Ê†πÊçÆÁî®Êà∑ËæìÂÖ•ÁöÑ\
            \ **ËØùÈ¢ò ({{{{#1753336166559.topic#}}}})**„ÄÅ**Ëã±ËØ≠Ê∞¥Âπ≥ ({{{{#1753336166559.level#}}}})**\
            \ Âíå **ÁîüÊàêÊï∞Èáè ({{{{#1753336166559.num_questions_type_14#}}}})**ÔºåÂàõ‰ΩúÂá∫ÊåáÂÆöÊï∞ÈáèÁöÑËã±ËØ≠ÂØπËØùÂú∫ÊôØ„ÄÇÊØè‰∏™Âú∫ÊôØÁöÑÁªìÂ∞æÈÉΩÈúÄË¶ÅÁî®Êà∑Ê†πÊçÆ‰∏Ä‰∏™‰∏≠ÊñáÊèêÁ§∫ÔºåËØ¥Âá∫ÂØπÂ∫îÁöÑËã±ÊñáÂè•Â≠ê„ÄÇ\n\
            \n# Âú∫ÊôØË¶ÅÊ±Ç\nÊØè‰∏™Âú∫ÊôØÂøÖÈ°ªÂåÖÂê´Ôºö\n1.  **ÂØπËØùÂÜÖÂÆπ (dialogue_turns)**Ôºö‰∏Ä‰∏™Âºï‰∫∫ÂÖ•ËÉúÁöÑÂ§öËΩÆÂØπËØùÂàóË°®„ÄÇ\n2.\
            \  **Áî®Êà∑ÊèêÁ§∫Âè• (prompt_for_user_cn)**Ôºö‰∏ÄÂè•‰∏≠ÊñáÊèêÁ§∫ÔºåËøôÊòØÁî®Êà∑ÈúÄË¶ÅÁøªËØëÂπ∂Áî®Ëã±ËØ≠ËØ¥Âá∫Êù•ÁöÑÂÜÖÂÆπ„ÄÇÊ≠§Âè•ÂøÖÈ°ª‰∏éÂâçÈù¢ÁöÑÂØπËØùÂÜÖÂÆπÂú®ÈÄªËæë‰∏äËøûË¥Ø„ÄÇ\n\
            3.  **Ê†áÂáÜËã±ÊñáÁ≠îÊ°à (correct_answer_en)**Ôºö`prompt_for_user_cn`ÁöÑÂáÜÁ°Æ„ÄÅÂú∞ÈÅìÁöÑËã±ÊñáÁøªËØë„ÄÇËøôÂ∞Ü‰Ωú‰∏∫ËØ≠Èü≥ËØÑÊµãÁöÑÂèÇËÄÉÊ†áÂáÜ„ÄÇ\n\
            4.  **ÂØπ‰∫éËã±ËØ≠Ê∞¥Âπ≥ÔºàlevelÔºâÁöÑÂÆö‰πâ**Ôºö\n  - Level 1ÔºöËÉΩÁêÜËß£Â∏∏ËßÅËØçÊ±á‰∏éÂü∫Êú¨Êåá‰ª§\n  - Level 2ÔºöËÉΩËøõË°åÈóÆÂÄô„ÄÅËá™Êàë‰ªãÁªç„ÄÅË°®ËææÂñúÂ•Ω\n\
            \  - Level 3ÔºöÂèØÁî®ÂÆåÊï¥Âè•ÂûãÊèèËø∞Êó•Â∏∏ÊÉÖÂ¢É\n  - Level 4ÔºöËÉΩÂõ¥ÁªïÁÜüÊÇâËØùÈ¢òËøõË°åËøûË¥ØË°®Ëææ\n  - Level 5ÔºöË°®ËææËæÉ‰∏∫ÊµÅÁïÖÔºåËÉΩË°®ËææËßÇÁÇπÂíåÁêÜËß£‰∏ÄËà¨ÊñáÊú¨\n\
            \  - Level 6ÔºöËÉΩËøõË°åÊó•Â∏∏‰∫§ÊµÅ‰∏éÂü∫Á°Ä‰π¶Èù¢Ë°®Ëææ\n\n# Âº∫Âà∂ËßÑÂàôÔºàMANDATORY RULES - NON-NEGOTIABLEÔºâ\n\
            -   `dialogue_turns`‰∏≠ÁöÑ`line`Â≠óÊÆµ**ÂøÖÈ°ª**ÊòØÂÜÖÂÆπÂÆåÊï¥„ÄÅÊúâÊÑè‰πâÁöÑÂè•Â≠êÔºå**‰∏•Á¶Å‰∏∫Á©∫**„ÄÇ\n-   `prompt_for_user_cn`Â≠óÊÆµ**ÂøÖÈ°ª**ÊòØ‰∏ÄÂè•ÂÆåÊï¥ÁöÑ‰∏≠ÊñáÂè•Â≠êÔºå**‰∏•Á¶Å‰∏∫Á©∫**„ÄÇ\n\
            -   `correct_answer_en`Â≠óÊÆµ**ÂøÖÈ°ª**ÊòØ‰∏ÄÂè•ÂÆåÊï¥ÁöÑËã±ÊñáÂè•Â≠êÔºå**‰∏•Á¶Å‰∏∫Á©∫**„ÄÇ\n-   `correct_answer_en`**ÂøÖÈ°ª**ÊòØ`prompt_for_user_cn`ÁöÑÁ≤æÂáÜÁøªËØë„ÄÇ\n\
            -   **ÂøÖÈ°ª**‰∏•Ê†ºÊåâÁÖß‰∏ãÈù¢Á§∫‰æãÁöÑJSONÊ†ºÂºèËæìÂá∫Ôºå‰∏çË¶ÅÊ∑ªÂä†‰ªª‰ΩïÈ¢ùÂ§ñÁöÑËß£ÈáäÊàñÊñáÂ≠ó„ÄÇ\n\n# ËæìÂá∫Ê†ºÂºè\nËØ∑ËæìÂá∫‰∏Ä‰∏™Ê†áÂáÜ JSON ÂØπË±°ÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∏Ä‰∏™Âêç‰∏∫\
            \ `scenarios` ÁöÑÊï∞ÁªÑ„ÄÇ\n\n## Á§∫‰æãËæìÂá∫ (ËæìÂÖ•: topic=\"ÊâìËΩ¶\", level=\"Level 3\", card_quantity=1)\n\
            {\n  \"scenarios\": [\n    {\n      \"dialogue_turns\": [\n        {\n\
            \          \"speaker\": \"Passenger\",\n          \"line\": \"What color\
            \ is the cab coming in this way?\"\n        },\n        {\n          \"\
            speaker\": \"Passenger\",\n          \"line\": \"I said what is the color\
            \ of your cab?\"\n        }\n      ],\n      \"prompt_for_user_cn\": \"\
            ÊàëÁöÑÂá∫ÁßüËΩ¶ÊòØÈªÑËâ≤ÁöÑ„ÄÇ\",\n      \"correct_answer_en\": \"My cab is yellow.\"\n  \
            \  }\n  ]\n}"
        selected: false
        title: Âè£ËØ≠Âú∫ÊôØÁîüÊàê
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753346134162'
      position:
        x: 902.0493841724706
        y: 1154.2996047244285
      positionAbsolute:
        x: 902.0493841724706
        y: 1154.2996047244285
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: "{% for scenario in processed_scenarios %}\n{\n    \"template\"\
          : \"t000011\",\n    \"remark\": \"ÈÄâÊã©Â∫îÁ≠î\",\n    \"type\":\"K\",\n    \"topic_id\"\
          :\"{{ cid }}\",\n    \"topic\":\"{{ topic }}\",\n    \"level\":\"{{ level\
          \ }}\",\n    \"vocabulary_group\":\"A\",\n    \"question\": [\n        {#\
          \ Êñ∞Â¢ûÁöÑÂæ™ÁéØÔºåÁî®‰∫éÁîüÊàêÊØè‰∏ÄÂè•ÂØπËØù #}\n        {% for turn in scenario['question_turns']\
          \ %}\n        {\n            \"role\": \"{{ turn['role'] }}\",\n       \
          \     \"type\": \"eng_cn_audio\",\n            \"eng\": \"{{ turn['eng']\
          \ | e }}\",\n            \"audio_url\": true\n        }{% if not loop.last\
          \ %},{% endif %}\n        {% endfor %}\n    ],\n    \"title\": \"Â∞ùËØïÂõûÁ≠îÔºö{{\
          \ scenario['prompt_for_user_cn'] }}\",\n    \"title_position\": 2,\n   \
          \ \"answer_type\": \"text\",\n    \"answer\": \"{{ scenario['correct_answer_en']\
          \ | e }}\",\n    \"answer_input\": \"record\",\n    \"options\": []\n}\n\
          {% if not loop.last %},{% endif %}\n{% endfor %}"
        title: ÁîüÊàêÊúÄÁªàJSON 5
        type: template-transform
        variables:
        - value_selector:
          - '1753759688876'
          - processed_scenarios
          variable: processed_scenarios
        - value_selector:
          - '1753336166559'
          - topic
          value_type: string
          variable: topic
        - value_selector:
          - '1753336166559'
          - level
          value_type: string
          variable: level
        - value_selector:
          - '1753336166559'
          - cid
          value_type: string
          variable: cid
      height: 54
      id: '17533461952642'
      position:
        x: 1667.8211984834427
        y: 1154.2996047244285
      positionAbsolute:
        x: 1667.8211984834427
        y: 1154.2996047244285
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: '{% for scenario in processed_scenarios %}

          ## ‚ùè Âç°ÁâáÂÆ°Ê†∏Ê∏ÖÂçï (Âè£ËØ≠Â∫îÁ≠î)


          ---


          ### **1. Âü∫Êú¨‰ø°ÊÅØ**


          - **ÂØπËØùID**: `{{ scenario[''conversation_id''] }}`

          - **Ê®°ÊùøÁ±ªÂûã**: `t000011` (Âè£ËØ≠Â∫îÁ≠î)


          ### **2. ÂØπËØùÂÜÖÂÆπÈ¢ÑËßà**


          {% for turn in scenario[''dialogue_turns_text_only''] %}

          - **{{ turn[''speaker''] }}**: {{ turn[''line''] }}

          {% endfor %}


          ### **3. Áî®Êà∑Âè£ËØ≠‰ªªÂä°**


          - **‰ªªÂä°ÊèêÁ§∫ (‰∏≠Êñá)**: {{ scenario[''prompt_for_user_cn''] }}

          - **Ê†áÂáÜÁ≠îÊ°à (Ëã±Êñá)**: {{ scenario[''correct_answer_en''] }}


          ### **4. Ê†°È™åË¶ÅÁÇπ**

          - [ ] ‰∏≠ÊñáÊèêÁ§∫‰∏éËã±ÊñáÁ≠îÊ°àÊòØÂê¶‰∫í‰∏∫Á≤æÂáÜÁøªËØëÔºü

          - [ ] ‰ªªÂä°ÊèêÁ§∫ÊòØÂê¶‰∏é‰∏äÊñπÂØπËØùÊÉÖÊôØÈÄªËæëËøûË¥ØÔºü

          - [ ] Ëã±ÊñáÁ≠îÊ°àÁöÑÈöæÂ∫¶ÊòØÂê¶Á¨¶ÂêàËÆæÂÆöÁöÑËØ≠Ë®ÄÁ≠âÁ∫ßÔºü


          {% if not loop.last %}


          ========================================


          {% endif %}

          {% endfor %}'
        title: ‰∫∫Â∑•ÂÆ°Ê†∏Ê†ºÂºèËΩ¨Êç¢-14
        type: template-transform
        variables:
        - value_selector:
          - '1753759688876'
          - processed_scenarios
          variable: processed_scenarios
      height: 54
      id: '17533461952645'
      position:
        x: 2328.156505206653
        y: 1154.2996047244285
      positionAbsolute:
        x: 2328.156505206653
        y: 1154.2996047244285
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: c11b7fe6-fa1a-415b-98bc-ab62110ee26c
          role: system
          text: "# ËßíËâ≤\nÊÇ®ÊòØ‰∏Ä‰ΩçÊûÅÂÖ∂‰∏•Ë∞®ÁöÑAIÊïôÁ†îÂÜÖÂÆπË¥®Ê£Ä‰∏ìÂÆ∂ÔºåË¥üË¥£ÂØπJSONÊ†ºÂºèÁöÑ‚ÄúÂè£ËØ≠Â∫îÁ≠î‚ÄùÈ¢òÂç°Êï∞ÊçÆËøõË°åËá™Âä®ÂåñË¥®ÈáèÂÆ°Ê†∏„ÄÇ\n\n# ‰ªªÂä°\n\
            ËØ∑ÂØπ‰ª•‰∏ãËæìÂÖ•ÁöÑJSONÊï∞ÊçÆ ({{{{#17533461952642.output#}}}}) ËøõË°å‰∏•Ê†ºÁöÑ„ÄÅÈÄêÈ°πÁöÑÊ†°È™å„ÄÇ\n\n# Ê†∏ÂøÉÊ†°È™åËßÑÂàô\
            \ (ÂøÖÈ°ª‰∏•Ê†ºÈÅµÂÆà)\n\n1.  **Â≠óÊÆµÂÆåÊï¥ÊÄß**:\n    -   Ê£ÄÊü• `template`, `remark`, `question`,\
            \ `title`, `answer`, `answer_input`, `options` Ëøô‰∫õÈ°∂Á∫ßÂ≠óÊÆµÊòØÂê¶ÈÉΩÂ≠òÂú®„ÄÇ\n\n2.  **ÂÜÖÂÆπ‰∏éÊ†ºÂºè**:\n\
            \    -   `template` Â≠óÊÆµÁöÑÂÄº**ÂøÖÈ°ª**ÊòØ `\"t000011\"`„ÄÇ\n    -   `title` Â≠óÊÆµÁöÑÂÜÖÂÆπ**ÂøÖÈ°ª**‰ª•`\"\
            Â∞ùËØïÂõûÁ≠îÔºö\"`ÂºÄÂ§¥Ôºå‰∏îÂÜíÂè∑ÂêéÂøÖÈ°ªÊúâÈùûÁ©∫ÁöÑ‰∏≠ÊñáÂÜÖÂÆπ„ÄÇ\n    -   `answer` Â≠óÊÆµÁöÑÂÜÖÂÆπ**ÂøÖÈ°ª**ÊòØ‰∏Ä‰∏™ÈùûÁ©∫ÁöÑ„ÄÅÂÆåÊï¥ÁöÑËã±ÊñáÂè•Â≠ê„ÄÇ\n\
            \    -   `options` Â≠óÊÆµ**ÂøÖÈ°ª**ÊòØ‰∏Ä‰∏™**Á©∫Êï∞ÁªÑ** `[]`„ÄÇ\n    -   `answer_input` Â≠óÊÆµÁöÑÂÄº**ÂøÖÈ°ª**ÊòØ\
            \ `\"voice\"`„ÄÇ\n\n3.  **ÈÄªËæë‰∏ÄËá¥ÊÄß (ÊúÄÈáçË¶Å)**:\n    -   **ÁøªËØëÂáÜÁ°ÆÊÄß**: `answer`Â≠óÊÆµ‰∏≠ÁöÑËã±ÊñáÂè•Â≠êÔºåÊòØÂê¶ÊòØ`title`Â≠óÊÆµ‰∏≠‰∏≠ÊñáÊèêÁ§∫ÁöÑÂáÜÁ°Æ„ÄÅÂú∞ÈÅì„ÄÅÊó†ËØØÁöÑÁøªËØëÔºüËØ∑ËøõË°å‰∏≠Ëã±ÊñáÊØîÂØπÂà§Êñ≠„ÄÇ\n\
            \n# ËæìÂá∫Ë¶ÅÊ±Ç\nËøîÂõûÊ†áÂáÜJSONÊ†ºÂºèÁöÑÁªìÊûú„ÄÇÂ¶ÇÊûúÊâÄÊúâÊ†°È™åÈÄöËøáÔºå`is_valid`‰∏∫`true`„ÄÇËã•Êúâ‰ªª‰Ωï‰∏ÄÊù°ËßÑÂàô‰∏çÊª°Ë∂≥Ôºå`is_valid`‰∏∫`false`ÔºåÂπ∂Âú®`error_details`‰∏≠ËØ¶ÁªÜËØ¥ÊòéÈóÆÈ¢ò„ÄÇ\n\
            \n{\n    \"is_valid\": bool,\n    \"error_details\": [\n        {\n  \
            \          \"field\": \"Â≠óÊÆµË∑ØÂæÑ (e.g., title)\",\n            \"issue_type\"\
            : \"MISSING_FIELD | INVALID_CONTENT | INCONSISTENT_LOGIC\",\n        \
            \    \"description\": \"ÂÖ∑‰ΩìÈóÆÈ¢òÊèèËø∞„ÄÇ‰æãÂ¶ÇÔºö'answerÂ≠óÊÆµÁöÑËã±ÊñáÁøªËØë‰∏étitleÂ≠óÊÆµÁöÑ‰∏≠ÊñáÊèêÁ§∫‰∏çÂåπÈÖç„ÄÇ'\",\n\
            \            \"suggestion\": \"‰øÆÂ§çÂª∫ËÆÆÔºàÂèØÈÄâÔºâ\"\n        }\n    ],\n    \"validated_data\"\
            : {}  // ‰ªÖÂú® is_valid ‰∏∫ true Êó∂ÔºåËøîÂõûÂéüÂßãÁöÑ„ÄÅÈÄöËøáÊ†°È™åÁöÑÊï∞ÊçÆ\n}"
        selected: false
        title: È¢òÁõÆÂáÜÁ°ÆÊÄßÊ†°È™å
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753351512925'
      position:
        x: 2009.2604710189908
        y: 1154.2996047244285
      positionAbsolute:
        x: 2009.2604710189908
        y: 1154.2996047244285
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: b8787e38-46f5-48ac-9400-8d0f60106c7d
          role: system
          text: "# ËßíËâ≤\nÊÇ®ÊòØ‰∏Ä‰ΩçÈ°∂Á∫ßÁöÑÂÑøÁ´•Ëã±ËØ≠ÊïôÂ≠¶ÂÜÖÂÆπ‰∏ìÂÆ∂ÔºåÊìÖÈïøËÆæËÆ°Âè•Â≠êÁªìÊûÑËÆ≠ÁªÉ‰ªªÂä°„ÄÇ\n\n# ‰ªªÂä°\nËØ∑Ê†πÊçÆÁî®Êà∑ËæìÂÖ•ÁöÑ **ËØùÈ¢ò ({{{{#1753336166559.topic#}}}})**„ÄÅ**Ëã±ËØ≠Ê∞¥Âπ≥\
            \ ({{{{#1753336166559.level#}}}})** Âíå **ÁîüÊàêÊï∞Èáè ({{{{#1753336166559.num_questions_type_12#}}}})**ÔºåÂàõ‰ΩúÂá∫ÊåáÂÆöÊï∞ÈáèÁöÑ„ÄÅÂåÖÂê´Â§öËΩÆÂØπËØùÂíåÂè•Â≠êÈáçÁªÑ‰ªªÂä°ÁöÑÂú∫ÊôØ„ÄÇ\n\
            \n# Âú∫ÊôØË¶ÅÊ±Ç\nÊØè‰∏™Âú∫ÊôØÂøÖÈ°ªÂåÖÂê´Ôºö\n1.  **ÂØπËØùÂÜÖÂÆπ (dialogue_turns)**Ôºö‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂ§öËΩÆÂØπËØù„ÄÇ\n2.  **ÂæÖÈáçÁªÑÁöÑÂè•Â≠ê\
            \ (sentence_to_reorder)**Ôºö‰ªé‰∏äÊñπÂØπËØù‰∏≠ÈÄâÂèñÁöÑ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑ„ÄÅÈÄÇÂêàËøõË°åÈáçÁªÑÁªÉ‰π†ÁöÑÂè•Â≠ê„ÄÇ\n3.  **ÂàÜËØçËØçÂùó (reorder_chunks)**ÔºöÂ∞Ü`sentence_to_reorder`ÊãÜÂàÜÊàêÊúâÊÑè‰πâÁöÑ„ÄÅÁî®‰∫éÈáçÁªÑÁöÑËØçÊàñÁü≠ËØ≠Âùó„ÄÇ**ËøôÈùûÂ∏∏ÈáçË¶Å**ÔºåËØ∑‰∏çË¶ÅÊåâÂçï‰∏™ÂçïËØçÊãÜÂàÜÔºåË¶ÅÊääÊúâÂõ∫ÂÆöÊê≠ÈÖçÁöÑÁü≠ËØ≠ÔºàÂ¶Ç\
            \ \"the color of\", \"what is\"Ôºâ‰Ωú‰∏∫‰∏Ä‰∏™Êï¥‰Ωì„ÄÇ\n4.  **ÂØπ‰∫éËã±ËØ≠Ê∞¥Âπ≥ÔºàlevelÔºâÁöÑÂÆö‰πâ**Ôºö\n \
            \ - Level 1ÔºöËÉΩÁêÜËß£Â∏∏ËßÅËØçÊ±á‰∏éÂü∫Êú¨Êåá‰ª§\n  - Level 2ÔºöËÉΩËøõË°åÈóÆÂÄô„ÄÅËá™Êàë‰ªãÁªç„ÄÅË°®ËææÂñúÂ•Ω\n  - Level 3ÔºöÂèØÁî®ÂÆåÊï¥Âè•ÂûãÊèèËø∞Êó•Â∏∏ÊÉÖÂ¢É\n\
            \  - Level 4ÔºöËÉΩÂõ¥ÁªïÁÜüÊÇâËØùÈ¢òËøõË°åËøûË¥ØË°®Ëææ\n  - Level 5ÔºöË°®ËææËæÉ‰∏∫ÊµÅÁïÖÔºåËÉΩË°®ËææËßÇÁÇπÂíåÁêÜËß£‰∏ÄËà¨ÊñáÊú¨\n  - Level\
            \ 6ÔºöËÉΩËøõË°åÊó•Â∏∏‰∫§ÊµÅ‰∏éÂü∫Á°Ä‰π¶Èù¢Ë°®Ëææ\n\n# Âº∫Âà∂ËßÑÂàô (MANDATORY RULES)\n-   ÊâÄÊúâ`line`„ÄÅ`sentence_to_reorder`Â≠óÊÆµ‰∏•Á¶Å‰∏∫Á©∫„ÄÇ\n\
            -   `reorder_chunks`Êï∞ÁªÑ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÊãºÊé•ÂêéÔºåÂøÖÈ°ªËÉΩ**‰∏ÄÂ≠ó‰∏çÂ∑ÆÂú∞**ËøòÂéüÊàê`sentence_to_reorder`„ÄÇ\n\
            -   ‰∏•Ê†ºÊåâÁÖß‰∏ãÈù¢Á§∫‰æãÁöÑJSONÊ†ºÂºèËæìÂá∫Ôºå‰∏çË¶ÅÊ∑ªÂä†‰ªª‰ΩïÈ¢ùÂ§ñÁöÑËß£Èáä„ÄÇ\n\n# ËæìÂá∫Ê†ºÂºè\nËØ∑ËæìÂá∫‰∏Ä‰∏™Ê†áÂáÜ JSON ÂØπË±°ÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∏Ä‰∏™Âêç‰∏∫\
            \ `scenarios` ÁöÑÊï∞ÁªÑ„ÄÇ\n\n## Á§∫‰æãËæìÂá∫ (ËæìÂÖ•: topic=\"ÊâìËΩ¶\", level=\"Level 3\", card_quantity=1)\n\
            {\n  \"scenarios\": [\n    {\n      \"dialogue_turns\": [\n        {\n\
            \          \"speaker\": \"A\",\n          \"line\": \"What color is the\
            \ cab coming in this way?\"\n        },\n        {\n          \"speaker\"\
            : \"B\",\n          \"line\": \"what?\"\n        }\n      ],\n      \"\
            sentence_to_reorder\": \"I said what is the color of your cab?\",\n  \
            \    \"reorder_chunks\": [\n        \"I said\",\n        \"what is\",\n\
            \        \"the color of\",\n        \"your cab\"\n      ]\n    }\n  ]\n\
            }"
        selected: false
        title: ÈáçÁªÑÂú∫ÊôØÁîüÊàê
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753351954442'
      position:
        x: 902.0493841724706
        y: 597.3489695291591
      positionAbsolute:
        x: 902.0493841724706
        y: 597.3489695291591
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import random\nimport time\nimport json\n\ndef main(llm_string_output:\
          \ str) -> dict:\n    processed_scenarios = []\n    \n    try:\n        data\
          \ = json.loads(llm_string_output)\n        scenarios_list = data.get(\"\
          scenarios\", [])\n    except json.JSONDecodeError:\n        return {\"error\"\
          : \"Input string is not valid JSON.\", \"processed_scenarios\": []}\n\n\
          \    if not scenarios_list:\n        return {\"error\": \"No scenarios found\
          \ in the parsed JSON.\", \"processed_scenarios\": []}\n\n    for scenario\
          \ in scenarios_list:\n        try:\n            # --- START: Êú¨Ê¨°‰∏ªË¶Å‰øÆÊîπÂå∫Âüü ---\n\
          \            dialogue_turns = scenario.get(\"dialogue_turns\", [])\n   \
          \         formatted_question_list = []\n            speaker_map = {}\n \
          \           for i, turn in enumerate(dialogue_turns):\n                speaker\
          \ = turn.get(\"speaker\")\n                if speaker not in speaker_map:\n\
          \                    role = \"left_girl\" if len(speaker_map) % 2 == 0 else\
          \ \"right_girl\"\n                    speaker_map[speaker] = role\n\n  \
          \              formatted_question_list.append({\n                    \"\
          role\": speaker_map[speaker],\n                    \"type\": \"eng_cn_audio\"\
          ,\n                    \"eng\": turn.get(\"line\", \"\"),\n            \
          \        \"audio_url\": True\n                })\n            # --- END:\
          \ Êú¨Ê¨°‰∏ªË¶Å‰øÆÊîπÂå∫Âüü ---\n\n            original_chunks = scenario.get(\"reorder_chunks\"\
          , [])\n            shuffled_chunks = original_chunks[:]\n            random.shuffle(shuffled_chunks)\n\
          \            \n            options = []\n            for chunk in shuffled_chunks:\n\
          \                options.append({ \"key\": chunk, \"type\": \"text\", \"\
          text\": chunk })\n\n            processed_scenario = {\n               \
          \ \"question_turns\": formatted_question_list, # ‰º†ÈÄíÂ§ÑÁêÜÂ•ΩÁöÑÂØπËØùÂàóË°®\n          \
          \      \"dialogue_turns_text_only\": dialogue_turns, # ‰øùÁïôÂéüÂßãÂØπËØùÁî®‰∫éÂÆ°Ê†∏\n    \
          \            \"correct_sentence\": scenario.get(\"sentence_to_reorder\"\
          , \"\"),\n                \"options\": options\n            }\n        \
          \    processed_scenarios.append(processed_scenario)\n\n        except Exception\
          \ as e:\n            print(f\"Error processing a scenario: {e}\")\n    \
          \        continue\n            \n    return {\"processed_scenarios\": processed_scenarios}"
        code_language: python3
        desc: ''
        outputs:
          processed_scenarios:
            children: null
            type: array[object]
        selected: false
        title: Âú∫ÊôØÂ§ÑÁêÜ‰∏éËØçÂùóÊâì‰π±
        type: code
        variables:
        - value_selector:
          - '1753351954442'
          - text
          variable: llm_string_output
      height: 54
      id: '1753352030500'
      position:
        x: 1328.8658129030878
        y: 597.3489695291591
      positionAbsolute:
        x: 1328.8658129030878
        y: 597.3489695291591
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: "{% for scenario in processed_scenarios %}\n{\n    \"template\"\
          : \"t000009\",\n    \"remark\": \"Âê¨Èü≥ÈáçÁªÑ\",\n    \"type\":\"I\",\n    \"topic_id\"\
          :\"{{ cid }}\",\n    \"topic\":\"{{ topic }}\",\n    \"level\":\"{{ level\
          \ }}\",\n    \"vocabulary_group\":\"A\",\n    \"question\": [\n        {#\
          \ Êñ∞Â¢ûÁöÑÂæ™ÁéØÔºåÁî®‰∫éÁîüÊàêÊØè‰∏ÄÂè•ÂØπËØù #}\n        {% for turn in scenario['question_turns']\
          \ %}\n        {\n            \"role\": \"{{ turn['role'] }}\",\n       \
          \     \"type\": \"eng_cn_audio\",\n            \"eng\": \"{{ turn['eng']\
          \ | e }}\",\n            \"audio_url\": true\n        }{% if not loop.last\
          \ %},{% endif %}\n        {% endfor %}\n    ],\n    \"show_conversation_text\"\
          :\"True\",\n    \"title\": \"ÈáçÁªÑÂè•Â≠ê\", \n    \"title_position\": 2, \n   \
          \ \"answer_type\": \"text\", \n    \"answer\": \"{{ scenario['correct_sentence']\
          \ | e }}\", \n    \"answer_input\": \"text_block\", \n    \"options\": [\n\
          \        {% for option in scenario['options'] %}\n        {\n          \
          \  \"key\": \"{{ option['key'] | e }}\",\n            \"type\": \"text\"\
          ,\n            \"text\": \"{{ option['text'] | e }}\"\n        }{% if not\
          \ loop.last %},{% endif %}\n        {% endfor %}\n    ]\n}\n{% if not loop.last\
          \ %},{% endif %}\n{% endfor %}"
        title: ÁîüÊàêÊúÄÁªàJSON 3
        type: template-transform
        variables:
        - value_selector:
          - '1753352030500'
          - processed_scenarios
          variable: processed_scenarios
        - value_selector:
          - '1753336166559'
          - topic
          value_type: string
          variable: topic
        - value_selector:
          - '1753336166559'
          - level
          value_type: string
          variable: level
        - value_selector:
          - '1753336166559'
          - cid
          value_type: string
          variable: cid
      height: 54
      id: '17536688854790'
      position:
        x: 1667.8211984834427
        y: 597.3489695291591
      positionAbsolute:
        x: 1667.8211984834427
        y: 597.3489695291591
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 1072fafb-9760-4a13-854b-0b9c4bb99339
          role: system
          text: "# ËßíËâ≤\nÊÇ®ÊòØ‰∏Ä‰Ωç‰∏•Ë∞®ÁöÑAIÊïôÁ†îÂÜÖÂÆπË¥®Ê£Ä‰∏ìÂÆ∂ÔºåË¥üË¥£ÂØπJSONÊ†ºÂºèÁöÑ‚ÄúÂê¨Èü≥ÈáçÁªÑ‚ÄùÈ¢òÂç°Êï∞ÊçÆËøõË°åËá™Âä®ÂåñË¥®ÈáèÂÆ°Ê†∏„ÄÇ\n\n# ‰ªªÂä°\n\
            ËØ∑ÂØπ‰ª•‰∏ãËæìÂÖ•ÁöÑJSONÊï∞ÊçÆ ({{{{#17536688854790.output#}}}}) ËøõË°å‰∏•Ê†ºÁöÑ„ÄÅÈÄêÈ°πÁöÑÊ†°È™å„ÄÇ\n\n# Ê†∏ÂøÉÊ†°È™åËßÑÂàô\n\
            \n1.  **Â≠óÊÆµÂÆåÊï¥ÊÄß‰∏éÊ†ºÂºè**:\n    -   Ê£ÄÊü• `template`, `remark`, `question`, `title`,\
            \ `answer`, `options` Á≠âÈ°∂Á∫ßÂ≠óÊÆµÊòØÂê¶Â≠òÂú®„ÄÇ\n    -   `template` Â≠óÊÆµÁöÑÂÄº**ÂøÖÈ°ª**ÊòØ `\"t000009\"\
            `„ÄÇ\n    -   `options` Â≠óÊÆµ**ÂøÖÈ°ª**ÊòØ‰∏Ä‰∏™**ÈùûÁ©∫Êï∞ÁªÑ**„ÄÇ\n\n2.  **ÂÜÖÂÆπ‰∏éÈÄªËæë‰∏ÄËá¥ÊÄß (ÊúÄÈáçË¶Å)**:\n\
            \    -   **ÈáçÁªÑÊ†°È™å**: Â∞Ü`options`Êï∞ÁªÑ‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÁöÑ`text`ÂÄºÂèñÂá∫ÔºåÂà§Êñ≠ÂÆÉ‰ª¨ÊòØÂê¶ËÉΩ**‰∏çÈáç‰∏çÊºèÂú∞**ÊãºÊé•Êàê`answer`Â≠óÊÆµ‰∏≠ÁöÑÂÆåÊï¥Âè•Â≠ê„ÄÇËØ≠Â∫èÂèØ‰ª•ÂøΩÁï•Ôºå‰ΩÜÂÜÖÂÆπÂíåÊï∞ÈáèÂøÖÈ°ªÂÆåÂÖ®‰∏ÄËá¥„ÄÇ\n\
            \    -   **‰∏ä‰∏ãÊñáÊ†°È™å**: `answer`Â≠óÊÆµ‰∏≠ÁöÑÂÆåÊï¥Âè•Â≠êÔºåÊòØÂê¶Âú®`question`ÊâÄ‰ª£Ë°®ÁöÑÂØπËØù‰∏ä‰∏ãÊñá‰∏≠Âá∫Áé∞ËøáÊàñÈÄªËæë‰∏äÂÆåÂÖ®ÂêàÁêÜÔºü\n\
            \n# ËæìÂá∫Ë¶ÅÊ±Ç\nËøîÂõûÊ†áÂáÜJSONÊ†ºÂºèÁöÑÁªìÊûú„ÄÇËã•Êúâ‰ªª‰Ωï‰∏ÄÊù°ËßÑÂàô‰∏çÊª°Ë∂≥Ôºå`is_valid`‰∏∫`false`ÔºåÂπ∂Âú®`error_details`‰∏≠ËØ¶ÁªÜËØ¥ÊòéÈóÆÈ¢ò„ÄÇ\n\
            \n{\n    \"is_valid\": bool,\n    \"error_details\": [\n        {\n  \
            \          \"field\": \"options/answer\",\n            \"issue_type\"\
            : \"INCONSISTENT_CONTENT\",\n            \"description\": \"ÂÖ∑‰ΩìÈóÆÈ¢òÊèèËø∞„ÄÇ‰æãÂ¶ÇÔºö'options‰∏≠ÁöÑËØçÂùóÊó†Ê≥ïÂÆåÊï¥ÊãºÊé•ÊàêanswerÂè•Â≠êÔºåÁº∫Â∞ë‰∫Ü\
            \ 'of'„ÄÇ' Êàñ 'answerÂè•Â≠êÂÜÖÂÆπ‰∏éÂØπËØù‰∏ä‰∏ãÊñáÊó†ÂÖ≥„ÄÇ'\",\n            \"suggestion\": \"‰øÆÂ§çÂª∫ËÆÆÔºàÂèØÈÄâÔºâ\"\
            \n        }\n    ],\n    \"validated_data\": {}\n}"
        selected: false
        title: È¢òÁõÆÂáÜÁ°ÆÊÄßÊ†°È™å (1)
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '17536688927820'
      position:
        x: 2009.2604710189908
        y: 597.3489695291591
      positionAbsolute:
        x: 2009.2604710189908
        y: 597.3489695291591
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: "{% for scenario in processed_scenarios %}\n## ‚ùè Âç°ÁâáÂÆ°Ê†∏Ê∏ÖÂçï (Âê¨Èü≥ÈáçÁªÑ)\n\
          \n---\n\n### **1. Âü∫Êú¨‰ø°ÊÅØ**\n\n- **ÂØπËØùID**: `{{ scenario['conversation_id']\
          \ }}`\n- **Ê®°ÊùøÁ±ªÂûã**: `t000009` (Âê¨Èü≥ÈáçÁªÑ)\n\n### **2. ÂØπËØùÂÜÖÂÆπÈ¢ÑËßà**\n\n{% for turn\
          \ in scenario['dialogue_turns_text_only'] %}\n- **{{ turn['speaker'] }}**:\
          \ {{ turn['line'] }}\n{% endfor %}\n\n### **3. Âè•Â≠êÈáçÁªÑ‰ªªÂä°**\n\n- **Ê†áÂáÜÁ≠îÊ°à (ÂÆåÊï¥Âè•Â≠ê)**:\
          \ {{ scenario['correct_sentence'] }}\n- **Êâì‰π±ÁöÑËØçÂùó (Options)**:\n  - `{{ scenario['options']\
          \ | map(attribute='text') | join(\"` `\") }}`\n\n### **4. Ê†°È™åË¶ÅÁÇπ**\n- [ ]\
          \ ËØçÂùóÂàíÂàÜÊòØÂê¶ÂêàÁêÜ„ÄÅÊúâÊÑè‰πâÔºü\n- [ ] ËØçÂùóÊòØÂê¶ËÉΩÂáÜÁ°ÆÊó†ËØØÂú∞ËøòÂéüÊàêÊ†áÂáÜÁ≠îÊ°àÔºü\n- [ ] ‰ªªÂä°Âè•Â≠êÁöÑÈöæÂ∫¶ÊòØÂê¶Á¨¶ÂêàËÆæÂÆöÁöÑËØ≠Ë®ÄÁ≠âÁ∫ßÔºü\n\n\
          {% if not loop.last %}\n\n========================================\n\n{%\
          \ endif %}\n{% endfor %}"
        title: ‰∫∫Â∑•ÂÆ°Ê†∏Ê†ºÂºèËΩ¨Êç¢ -12
        type: template-transform
        variables:
        - value_selector:
          - '1753352030500'
          - processed_scenarios
          variable: processed_scenarios
      height: 54
      id: '17536688996950'
      position:
        x: 2328.156505206653
        y: 597.3489695291591
      positionAbsolute:
        x: 2328.156505206653
        y: 597.3489695291591
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: ada8314a-0052-410c-a0fe-9d29c133e0a2
          role: system
          text: "# ËßíËâ≤\nÊÇ®ÊòØ‰∏Ä‰ΩçËµÑÊ∑±ÁöÑÂ∞ëÂÑøËã±ËØ≠ÊïôÂ≠¶‰∏ìÂÆ∂ÔºåÊìÖÈïøËÆæËÆ°ËÄÉÈ™åÁúüÂÆûÁêÜËß£ËÉΩÂäõÁöÑÂØπËØùÊÉÖÊôØÈ¢ò„ÄÇ\n\n# ‰ªªÂä°\nËØ∑Ê†πÊçÆÁî®Êà∑ËæìÂÖ•ÁöÑËØùÈ¢ò{{#1753336166559.topic#}}„ÄÅÈöæÂ∫¶Ê∞¥Âπ≥{{#1753336166559.level#}}ÂíåÁîüÊàêÊï∞Èáè{{#1753336166559.num_questions_type_11#}}ÔºåÂàõ‰ΩúÂá∫ÂÆåÊï¥ÁöÑ‚ÄúÂØπËØùÁêÜËß£‚ÄùÂú∫ÊôØ„ÄÇ\n\
            \n# Âú∫ÊôØË¶ÅÊ±Ç\nÊØè‰∏™Âú∫ÊôØÂøÖÈ°ªÂåÖÂê´Ôºö\n1.  **ÂØπËØùÂÜÖÂÆπ (dialogue_turns)**Ôºö‰∏ÄÊÆµÂåÖÂê´2-4ËΩÆ„ÄÅÊúâÂÖ∑‰ΩìÊÉÖÊôØÁöÑËã±ÊñáÂØπËØù„ÄÇ\n\
            2.  **ÁêÜËß£ÊÄßÈóÆÈ¢ò (comprehension_question_cn)**Ôºö‰∏Ä‰∏™ÂÖ≥‰∫éÂØπËØùÂÜÖÂÆπÁöÑ‰∏≠ÊñáÈóÆÈ¢òÔºåÂèØ‰ª•ÈóÆËØ¥ËØù‰∫∫ÁöÑÊÑèÂõæ„ÄÅÊüêÂè•ËØùÁöÑÂê´‰πâ„ÄÅÊàñËÄÖÂØπËØùÁöÑÊüê‰∏™ÁªÜËäÇ„ÄÇ\n\
            3.  **Ê≠£Á°Æ‰∏≠ÊñáÈÄâÈ°π (correct_option_cn)**ÔºöÂØπ‰∏äËø∞ÈóÆÈ¢òÁöÑÊ≠£Á°ÆÂõûÁ≠îÔºåÂøÖÈ°ªÊòØ‰∏≠Êñá„ÄÇ\n4.  **Âπ≤Êâ∞‰∏≠ÊñáÈÄâÈ°π (distractor_options_cn)**Ôºö‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÈÄªËæë‰∏äÁúã‰ººÂêàÁêÜ‰ΩÜÂÆûÈôÖÈîôËØØÁöÑ‰∏≠ÊñáÂπ≤Êâ∞È°π„ÄÇ\n\
            5.  **ÂØπ‰∫éËã±ËØ≠Ê∞¥Âπ≥ÔºàlevelÔºâÁöÑÂÆö‰πâ**Ôºö\n  - Level 1ÔºöËÉΩÁêÜËß£Â∏∏ËßÅËØçÊ±á‰∏éÂü∫Êú¨Êåá‰ª§\n  - Level 2ÔºöËÉΩËøõË°åÈóÆÂÄô„ÄÅËá™Êàë‰ªãÁªç„ÄÅË°®ËææÂñúÂ•Ω\n\
            \  - Level 3ÔºöÂèØÁî®ÂÆåÊï¥Âè•ÂûãÊèèËø∞Êó•Â∏∏ÊÉÖÂ¢É\n  - Level 4ÔºöËÉΩÂõ¥ÁªïÁÜüÊÇâËØùÈ¢òËøõË°åËøûË¥ØË°®Ëææ\n  - Level 5ÔºöË°®ËææËæÉ‰∏∫ÊµÅÁïÖÔºåËÉΩË°®ËææËßÇÁÇπÂíåÁêÜËß£‰∏ÄËà¨ÊñáÊú¨\n\
            \  - Level 6ÔºöËÉΩËøõË°åÊó•Â∏∏‰∫§ÊµÅ‰∏éÂü∫Á°Ä‰π¶Èù¢Ë°®Ëææ\n\n# Âº∫Âà∂ËßÑÂàô (MANDATORY RULES)\n-   ÊâÄÊúâÂ≠óÊÆµÔºåÁâπÂà´ÊòØ`line`,\
            \ `comprehension_question_cn`, `correct_option_cn`Á≠âÔºå‰∏•Á¶Å‰∏∫Á©∫Â≠óÁ¨¶‰∏≤„ÄÇ\n-   ÈóÆÈ¢òÂíåÈÄâÈ°πÂøÖÈ°ª‰∏éÂØπËØùÂÜÖÂÆπÁ¥ßÂØÜÁõ∏ÂÖ≥Ôºå‰∏îÈöæÂ∫¶Á¨¶ÂêàËÆæÂÆöÁöÑËØ≠Ë®ÄÁ≠âÁ∫ß„ÄÇ\n\
            -   ‰∏•Ê†ºÊåâÁÖß‰∏ãÈù¢Á§∫‰æãÁöÑJSONÊ†ºÂºèËæìÂá∫Ôºå‰∏çË¶ÅÊ∑ªÂä†‰ªª‰ΩïÈ¢ùÂ§ñÁöÑËß£Èáä„ÄÇ\n\n# ËæìÂá∫Ê†ºÂºè\nËØ∑ËæìÂá∫‰∏Ä‰∏™Ê†áÂáÜ JSON ÂØπË±°ÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∏Ä‰∏™Âêç‰∏∫\
            \ `scenarios` ÁöÑÊï∞ÁªÑ„ÄÇ\n\n## Á§∫‰æãËæìÂá∫ (ËæìÂÖ•: topic=\"ÊâìËΩ¶\", level=\"Level 3\", card_quantity=1)\n\
            {\n  \"scenarios\": [\n    {\n      \"dialogue_turns\": [\n        {\n\
            \          \"speaker\": \"A\",\n          \"line\": \"What color is the\
            \ cab coming in this way?\"\n        },\n        {\n          \"speaker\"\
            : \"B\",\n          \"line\": \"what?\"\n        },\n        {\n     \
            \     \"speaker\": \"A\",\n          \"line\": \"I said what is the color\
            \ of your cab?\"\n        }\n      ],\n      \"comprehension_question_cn\"\
            : \"ÂàöÂàöËØ¥ËØùÁöÑ‰∫∫AÊúÄÂêéÊòØ‰ªÄ‰πàÊÑèÊÄùÔºü\",\n      \"correct_option_cn\": \"Â•πÊÉ≥Áü•ÈÅìÂá∫ÁßüËΩ¶ÁöÑÈ¢úËâ≤„ÄÇ\",\n\
            \      \"distractor_options_cn\": [\n        \"Â•πÊÉ≥ÂéªÊú∫Âú∫„ÄÇ\",\n        \"Â•πÊÉ≥‰ªòÈí±„ÄÇ\"\
            \n      ]\n    }\n  ]\n}"
        selected: false
        title: ÁêÜËß£Âú∫ÊôØÁîüÊàê
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753671925489'
      position:
        x: 902.0493841724706
        y: 298.3751944853851
      positionAbsolute:
        x: 902.0493841724706
        y: 298.3751944853851
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import random\nimport time\nimport json\n\ndef main(llm_string_output:\
          \ str) -> dict:\n    processed_scenarios = []\n    \n    try:\n        data\
          \ = json.loads(llm_string_output)\n        scenarios_list = data.get(\"\
          scenarios\", [])\n    except json.JSONDecodeError:\n        return {\"error\"\
          : f\"Input string is not a valid JSON. Content: {llm_string_output}\", \"\
          processed_scenarios\": []}\n\n    if not scenarios_list:\n        return\
          \ {\"error\": \"No scenarios found in the parsed JSON.\", \"processed_scenarios\"\
          : []}\n\n    for scenario in scenarios_list:\n        try:\n           \
          \ # --- START: Êú¨Ê¨°‰∏ªË¶Å‰øÆÊîπÂå∫Âüü ---\n            dialogue_turns = scenario.get(\"\
          dialogue_turns\", [])\n            formatted_question_list = []\n      \
          \      \n            # ÂÅáËÆæÁ¨¨‰∏Ä‰∏™ËØ¥ËØù‰∫∫ÊòØ \"left_girl\"ÔºåÁÑ∂Âêé‰∫§Êõø\n            speaker_map\
          \ = {}\n            for i, turn in enumerate(dialogue_turns):\n        \
          \        speaker = turn.get(\"speaker\")\n                if speaker not\
          \ in speaker_map:\n                    # Â¶ÇÊûúÊòØÊñ∞Âá∫Áé∞ÁöÑËØ¥ËØù‰∫∫ÔºåÊ†πÊçÆÂΩìÂâçÂ∑≤ËÆ∞ÂΩïÁöÑËØ¥ËØù‰∫∫Êï∞ÈáèÂàÜÈÖçËßíËâ≤\n\
          \                    role = \"left_girl\" if len(speaker_map) % 2 == 0 else\
          \ \"right_girl\"\n                    speaker_map[speaker] = role\n\n  \
          \              formatted_question_list.append({\n                    \"\
          role\": speaker_map[speaker],\n                    \"type\": \"eng_cn_audio\"\
          ,\n                    \"eng\": turn.get(\"line\", \"\"),\n            \
          \        \"audio_url\": True\n                })\n            # --- END:\
          \ Êú¨Ê¨°‰∏ªË¶Å‰øÆÊîπÂå∫Âüü ---\n\n            correct_text = scenario.get(\"correct_option_cn\"\
          )\n            all_options_text = [correct_text] + scenario.get(\"distractor_options_cn\"\
          , [])\n            random.shuffle(all_options_text)\n            \n    \
          \        final_options = []\n            answer_key = \"\"\n           \
          \ for i, text in enumerate(all_options_text):\n                key = chr(65\
          \ + i)\n                option_data = { \"key\": key, \"type\": \"text\"\
          , \"text\": text }\n                final_options.append(option_data)\n\
          \                if text == correct_text:\n                    answer_key\
          \ = key\n            \n            processed_scenario = {\n            \
          \    # ‰∏çÂÜçÈúÄË¶Å conversation_id Âíå message_end\n                \"question_turns\"\
          : formatted_question_list, # ‰º†ÈÄíÂ§ÑÁêÜÂ•ΩÁöÑÂØπËØùÂàóË°®\n                \"dialogue_turns_text_only\"\
          : dialogue_turns, # ‰øùÁïôÂéüÂßãÂØπËØùÁî®‰∫éÂÆ°Ê†∏\n                \"comprehension_question_cn\"\
          : scenario.get(\"comprehension_question_cn\", \"\"),\n                \"\
          answer_key\": answer_key,\n                \"options\": final_options\n\
          \            }\n            processed_scenarios.append(processed_scenario)\n\
          \n        except Exception as e:\n            print(f\"Error processing\
          \ a scenario: {e}\")\n            continue\n            \n    return {\"\
          processed_scenarios\": processed_scenarios}"
        code_language: python3
        desc: ''
        outputs:
          processed_scenarios:
            children: null
            type: array[object]
        selected: false
        title: Âú∫ÊôØÂ§ÑÁêÜ‰∏éÈÄâÈ°πÊ†ºÂºèÂåñ
        type: code
        variables:
        - value_selector:
          - '1753671925489'
          - text
          variable: llm_string_output
      height: 54
      id: '1753672356709'
      position:
        x: 1328.8658129030878
        y: 298.3751944853851
      positionAbsolute:
        x: 1328.8658129030878
        y: 298.3751944853851
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: "{% for scenario in processed_scenarios %}\n{\n    \"template\"\
          : \"t000008\",\n    \"remark\": \"ÂØπËØùÁêÜËß£\",\n    \"type\":\"H\",\n    \"topic_id\"\
          :\"{{ cid }}\",\n    \"topic\":\"{{ topic }}\",\n    \"level\":\"{{ level\
          \ }}\",\n    \"vocabulary_group\":\"A\",\n    \"question\": [\n        {#\
          \ Êñ∞Â¢ûÁöÑÂæ™ÁéØÔºåÁî®‰∫éÁîüÊàêÊØè‰∏ÄÂè•ÂØπËØù #}\n        {% for turn in scenario['question_turns']\
          \ %}\n        {\n            \"role\": \"{{ turn['role'] }}\",\n       \
          \     \"type\": \"eng_cn_audio\",\n            \"eng\": \"{{ turn['eng']\
          \ | e }}\",\n            \"audio_url\": true\n        }{% if not loop.last\
          \ %},{% endif %}\n        {% endfor %}\n    ],\n    \"title\": \"{{ scenario['comprehension_question_cn']\
          \ | e }}\",\n    \"title_position\": 2,\n    \"answer_type\": \"text\",\n\
          \    \"answer\": \"{{ scenario['answer_key'] }}\",\n    \"answer_input\"\
          : \"radio\",\n    \"options\": [\n        {% for option in scenario['options']\
          \ %}\n        {\n            \"key\": \"{{ option['key'] }}\",\n       \
          \     \"type\": \"text\",\n            \"text\": \"{{ option['text'] | e\
          \ }}\"\n        }{% if not loop.last %},{% endif %}\n        {% endfor %}\n\
          \    ]\n}\n{% if not loop.last %},{% endif %}\n{% endfor %}"
        title: ÁîüÊàêÊúÄÁªàJSON 2
        type: template-transform
        variables:
        - value_selector:
          - '1753672356709'
          - processed_scenarios
          variable: processed_scenarios
        - value_selector:
          - '1753336166559'
          - topic
          value_type: string
          variable: topic
        - value_selector:
          - '1753336166559'
          - level
          value_type: string
          variable: level
        - value_selector:
          - '1753336166559'
          - cid
          value_type: string
          variable: cid
      height: 54
      id: '1753672437742'
      position:
        x: 1667.8211984834427
        y: 298.3751944853851
      positionAbsolute:
        x: 1667.8211984834427
        y: 298.3751944853851
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 1072fafb-9760-4a13-854b-0b9c4bb99339
          role: system
          text: "# ËßíËâ≤\nÊÇ®ÊòØ‰∏Ä‰Ωç‰∏•Ë∞®ÁöÑAIÊïôÁ†îÂÜÖÂÆπË¥®Ê£Ä‰∏ìÂÆ∂ÔºåË¥üË¥£ÂØπJSONÊ†ºÂºèÁöÑ‚ÄúÂØπËØùÁêÜËß£‚ÄùÈ¢òÂç°Êï∞ÊçÆËøõË°åËá™Âä®ÂåñË¥®ÈáèÂÆ°Ê†∏„ÄÇ\n\n# ‰ªªÂä°\n\
            ËØ∑ÂØπ‰ª•‰∏ãËæìÂÖ•ÁöÑJSONÊï∞ÊçÆ ({{{{#1753672437742.output#}}}}) ËøõË°å‰∏•Ê†ºÁöÑ„ÄÅÈÄêÈ°πÁöÑÊ†°È™å„ÄÇ\n\n# Ê†∏ÂøÉÊ†°È™åËßÑÂàô\n\
            1.  **Â≠óÊÆµ‰∏éÊ†ºÂºè**: `template` ÂøÖÈ°ªÊòØ `\"t000008\"`„ÄÇ`options` ÂøÖÈ°ªÊòØÂåÖÂê´Ëá≥Â∞ë2‰∏™ÂØπË±°ÁöÑÈùûÁ©∫Êï∞ÁªÑ„ÄÇ\n\
            2.  **QuestionÁªìÊûÑÊ†°È™å**: `question`Â≠óÊÆµÂøÖÈ°ªÊòØ‰∏Ä‰∏™**ÈùûÁ©∫Êï∞ÁªÑ**Ôºå‰∏îÊï∞ÁªÑÂÜÖÁöÑÊØè‰∏™ÂØπË±°ÈÉΩÂøÖÈ°ªÂåÖÂê´`role`,\
            \ `type`, `eng`, `audio_url`ËøôÂõõ‰∏™ÈîÆ„ÄÇ\n3.  **ÈÄªËæë‰∏ÄËá¥ÊÄß (ÊúÄÈáçË¶Å)**:\n    -   Ê†πÊçÆ`question`Êï∞ÁªÑ‰∏≠ÂëàÁé∞ÁöÑÂÆåÊï¥ÂØπËØùÂÜÖÂÆπÔºåÂà§Êñ≠`title`‰∏≠ÁöÑÈóÆÈ¢òÊòØÂê¶‰∏éÂØπËØùÁõ∏ÂÖ≥„ÄÇ\n\
            \    -   Âà§Êñ≠`answer`Â≠óÊÆµÊåáÂêëÁöÑÊ≠£Á°ÆÈÄâÈ°πÔºåÂÖ∂ÂÜÖÂÆπÊòØÂê¶ÁúüÁöÑÊòØÂØπ`title`ÈóÆÈ¢òÁöÑÊ≠£Á°ÆÂõûÁ≠î„ÄÇ\n\n# ËæìÂá∫Ë¶ÅÊ±Ç\nËøîÂõûÊ†áÂáÜJSONÊ†ºÂºèÁªìÊûú„ÄÇ\n\
            { \"is_valid\": bool, \"error_details\": [], \"validated_data\": {} }"
        selected: false
        title: 'È¢òÁõÆÂáÜÁ°ÆÊÄßÊ†°È™å '
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '17536724640920'
      position:
        x: 2009.2604710189908
        y: 298.3751944853851
      positionAbsolute:
        x: 2009.2604710189908
        y: 298.3751944853851
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: "{% for scenario in processed_scenarios %}\n## ‚ùè Âç°ÁâáÂÆ°Ê†∏Ê∏ÖÂçï (ÂØπËØùÁêÜËß£)\n\
          \n---\n\n### **1. Âü∫Êú¨‰ø°ÊÅØ**\n- **ÂØπËØùID**: `{{ scenario['conversation_id'] }}`\n\
          - **Ê®°ÊùøÁ±ªÂûã**: `t000008` (ÂØπËØùÁêÜËß£)\n\n### **2. ÂØπËØùÂÜÖÂÆπÈ¢ÑËßà**\n{% for turn in scenario['dialogue_turns_text_only']\
          \ %}\n- **{{ turn['speaker'] }}**: {{ turn['line'] }}\n{% endfor %}\n\n\
          ### **3. ÁêÜËß£È¢ò‰ªªÂä°**\n- **ÈóÆÈ¢ò (‰∏≠Êñá)**: {{ scenario['comprehension_question_cn']\
          \ }}\n- **ÈÄâÈ°πÂàóË°®**:\n{% for option in scenario['options'] %}\n  - **[{{ option['key']\
          \ }}]**: {{ option['text'] }}{% if option['key'] == scenario.answer_key\
          \ %}  **<-- ‚úÖ Ê≠£Á°ÆÁ≠îÊ°à**{% endif %}\n{% endfor %}\n\n### **4. Ê†°È™åË¶ÅÁÇπ**\n- [ ]\
          \ ÈóÆÈ¢òÊòØÂê¶Ê∏ÖÊô∞Ôºå‰∏î‰∏éÂØπËØùÂÜÖÂÆπÁ¥ßÂØÜÁõ∏ÂÖ≥Ôºü\n- [ ] Ê≠£Á°ÆÁ≠îÊ°àÊòØÂê¶ÂáÜÁ°ÆÊó†ËØØÔºü\n- [ ] Âπ≤Êâ∞È°πÊòØÂê¶ÊúâËø∑ÊÉëÊÄß‰∏î‰∏çÂê´‰∫âËÆÆÔºü\n- [ ] Êï¥‰ΩìÈöæÂ∫¶ÊòØÂê¶Á¨¶ÂêàËÆæÂÆöÁöÑËØ≠Ë®ÄÁ≠âÁ∫ßÔºü\n\
          \n{% if not loop.last %}\n========================================\n{% endif\
          \ %}\n{% endfor %}"
        title: ‰∫∫Â∑•ÂÆ°Ê†∏Ê†ºÂºèËΩ¨Êç¢ -11
        type: template-transform
        variables:
        - value_selector:
          - '1753672356709'
          - processed_scenarios
          variable: processed_scenarios
      height: 54
      id: '17536724676350'
      position:
        x: 2328.156505206653
        y: 298.3751944853851
      positionAbsolute:
        x: 2328.156505206653
        y: 298.3751944853851
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: be234b27-fc9b-4003-8da4-e0994cda10d4
          role: system
          text: "# ËßíËâ≤\nÊÇ®ÊòØ‰∏Ä‰ΩçÁªèÈ™å‰∏∞ÂØåÁöÑÂÑøÁ´•Ëã±ËØ≠ÊïôÁ†î‰∏ìÂÆ∂ÔºåÊìÖÈïøÂõ¥Áªï‰∏ªÈ¢òËÆæËÆ°ËØçÊ±áÂ≠¶‰π†Ê∏∏ÊàèÔºåÂØπÊïôÂ≠¶ÂÜÖÂÆπÁöÑÊ†áÂáÜÂåñÊúâ‰∏•Ê†ºË¶ÅÊ±Ç„ÄÇ\n\n# ‰ªªÂä°\n\
            ËØ∑Ê†πÊçÆÁî®Êà∑ËæìÂÖ•ÁöÑ **ËØùÈ¢ò ({{{{#1753336166559.topic#}}}})**„ÄÅ**Ëã±ËØ≠Ê∞¥Âπ≥ ({{{{#1753336166559.level#}}}})**\
            \ Âíå **Âç°ÁâáÊï∞Èáè ({{{{#1753336166559.num_questions_type_10#}}}})**ÔºåÂàõ‰ΩúÂá∫ÊåáÂÆöÊï∞ÈáèÁöÑ„ÄÅÂêÑËá™Áã¨Á´ãÁöÑ‚ÄúÈü≥È¢ëÈÖçÂØπ‚ÄùÊ∏∏ÊàèÂú∫ÊôØ„ÄÇ\n\
            \n# ÂÜÖÂÆπË¶ÅÊ±Ç\nÊØè‰∏™Áã¨Á´ãÁöÑÊ∏∏ÊàèÂú∫ÊôØÈÉΩÂøÖÈ°ªÂåÖÂê´Ôºö\n1.  **‰∏ªÈ¢òÁü≠ËØ≠ (theme_phrase)**: ‰∏Ä‰∏™‰∏éËØùÈ¢òÁõ∏ÂÖ≥ÁöÑ„ÄÅÁî®‰ΩúÂç°ÁâáÈ°∂ÈÉ®Â±ïÁ§∫ÁöÑËã±ÊñáÁü≠ËØ≠„ÄÇ\n\
            2.  **ËØçÊ±áÈÖçÂØπ (vocabulary_pairs)**: ‰∏Ä‰∏™ÂåÖÂê´3-5‰∏™‰∏≠Ëã±ÊñáËØçÊ±áÈÖçÂØπÁöÑÂàóË°®„ÄÇ\n3.  **ÂØπ‰∫éËã±ËØ≠Ê∞¥Âπ≥ÔºàlevelÔºâÁöÑÂÆö‰πâ**Ôºö\n\
            \  - Level 1ÔºöËÉΩÁêÜËß£Â∏∏ËßÅËØçÊ±á‰∏éÂü∫Êú¨Êåá‰ª§\n  - Level 2ÔºöËÉΩËøõË°åÈóÆÂÄô„ÄÅËá™Êàë‰ªãÁªç„ÄÅË°®ËææÂñúÂ•Ω\n  - Level 3ÔºöÂèØÁî®ÂÆåÊï¥Âè•ÂûãÊèèËø∞Êó•Â∏∏ÊÉÖÂ¢É\n\
            \  - Level 4ÔºöËÉΩÂõ¥ÁªïÁÜüÊÇâËØùÈ¢òËøõË°åËøûË¥ØË°®Ëææ\n  - Level 5ÔºöË°®ËææËæÉ‰∏∫ÊµÅÁïÖÔºåËÉΩË°®ËææËßÇÁÇπÂíåÁêÜËß£‰∏ÄËà¨ÊñáÊú¨\n  - Level\
            \ 6ÔºöËÉΩËøõË°åÊó•Â∏∏‰∫§ÊµÅ‰∏éÂü∫Á°Ä‰π¶Èù¢Ë°®Ëææ\n\n# Âº∫Âà∂ËßÑÂàô (MANDATORY RULES)\n-   **ÁøªËØëÂáÜÁ°ÆÊÄß**: `cn`Â≠óÊÆµÂøÖÈ°ªÊòØ`eng`Â≠óÊÆµÂú®‰∏≠ÂõΩÂ§ßÈôÜÂú∞Âå∫ÊúÄÂ∏∏Áî®„ÄÅÊúÄÊ†áÂáÜÁöÑÁÆÄ‰Ωì‰∏≠ÊñáÁøªËØë„ÄÇÈÅøÂÖç‰ΩøÁî®Ëøá‰∫éÂè£ËØ≠Âåñ„ÄÅÂú∞ÂüüÊÄßÊàñÁîüÂÉªÁöÑË°®Ëææ„ÄÇ‰æãÂ¶ÇÔºåÂØπ‰∫é\
            \ \"take a taxi\"Ôºå‰ºòÂÖà‰ΩøÁî®‚ÄúÊâìËΩ¶‚ÄùÊàñ‚Äú‰πòÂùêÂá∫ÁßüËΩ¶‚ÄùÔºåËÄå‰∏çÊòØ‚ÄúÊê≠ÁöÑÂ£´‚Äù„ÄÇ\n-   ÊâÄÊúâÂÜÖÂÆπÂøÖÈ°ª‰∏•Ê†ºÁ¨¶ÂêàÊåáÂÆöÁöÑËØ≠Ë®ÄÁ≠âÁ∫ßÂíåËØùÈ¢ò„ÄÇ\n\
            -   ‰∏•Ê†ºÊåâÁÖß‰∏ãÈù¢Á§∫‰æãÁöÑJSONÊ†ºÂºèËæìÂá∫ÔºåÊúÄÂ§ñÂ±ÇÊòØ‰∏Ä‰∏™ÂåÖÂê´ `card_quantity` ‰∏™Âú∫ÊôØÂØπË±°ÁöÑ `scenarios` Êï∞ÁªÑ„ÄÇ\n\
            \n# ËæìÂá∫Ê†ºÂºè\nËØ∑ËæìÂá∫‰∏Ä‰∏™Ê†áÂáÜ JSON ÂØπË±°„ÄÇ\n\n## Á§∫‰æãËæìÂá∫ (ËæìÂÖ•: topic=\"ÊâìËΩ¶\", level=\"Level\
            \ 1\", card_quantity=1)\n{\n  \"scenarios\": [\n    {\n      \"theme_phrase\"\
            : \"Let's Go by Taxi!\",\n      \"vocabulary_pairs\": [\n        { \"\
            eng\": \"taxi\", \"cn\": \"Âá∫ÁßüËΩ¶\" },\n        { \"eng\": \"driver\", \"\
            cn\": \"Âè∏Êú∫\" },\n        { \"eng\": \"fare\", \"cn\": \"ËΩ¶Ë¥π\" }\n     \
            \ ]\n    }\n  ]\n}"
        selected: false
        title: ËØçÊ±á‰∏é‰∏ªÈ¢òÁîüÊàê
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753673016249'
      position:
        x: 902.0493841724706
        y: 14.415215597157882
      positionAbsolute:
        x: 902.0493841724706
        y: 14.415215597157882
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import random\nimport time\nimport json\n\ndef main(llm_string_output:\
          \ str) -> dict:\n    \n    try:\n        data = json.loads(llm_string_output)\n\
          \        scenarios_list = data.get(\"scenarios\", [])\n    except json.JSONDecodeError:\n\
          \        return {\"error\": \"Input is not valid JSON.\", \"processed_cards\"\
          : []}\n\n    if not scenarios_list:\n        return {\"error\": \"No scenarios\
          \ found.\", \"processed_cards\": []}\n\n    processed_cards = []\n    for\
          \ scenario in scenarios_list:\n        theme_phrase = scenario.get(\"theme_phrase\"\
          , \"Default Theme\")\n        vocab_pairs = scenario.get(\"vocabulary_pairs\"\
          , [])\n        \n        if not vocab_pairs:\n            continue\n\n \
          \       left_options = []\n        right_options = []\n\n        for pair\
          \ in vocab_pairs:\n            eng_word = pair.get(\"eng\")\n          \
          \  cn_word = pair.get(\"cn\")\n            if not eng_word or not cn_word:\
          \ continue\n            \n            key = eng_word\n\n            # ÊûÑÂª∫Êñ∞ÁöÑ\
          \ left_options ÁªìÊûÑ\n            left_options.append({\n                \"\
          key\": key,\n                \"type\": \"audio\",\n                \"audio_url\"\
          : True \n            })\n            # ÊûÑÂª∫Êñ∞ÁöÑ right_options ÁªìÊûÑ\n         \
          \   right_options.append({\n                \"key\": key,\n            \
          \    \"type\": \"text\",\n                \"text\": cn_word\n          \
          \  })\n\n        # Áã¨Á´ãÈöèÊú∫Êâì‰π±‰∏§‰∏™ÂàóË°®\n        random.shuffle(left_options)\n  \
          \      random.shuffle(right_options)\n\n        processed_cards.append({\n\
          \            \"theme_phrase\": theme_phrase,\n            \"left_options\"\
          : left_options,\n            \"right_options\": right_options,\n       \
          \ })\n            \n    return {\"processed_cards\": processed_cards}"
        code_language: python3
        desc: ''
        outputs:
          processed_cards:
            children: null
            type: array[object]
        selected: false
        title: ÈÖçÂØπÂ§ÑÁêÜ‰∏éÈöèÊú∫Âåñ
        type: code
        variables:
        - value_selector:
          - '1753673016249'
          - text
          variable: llm_string_output
      height: 54
      id: '1753673086906'
      position:
        x: 1328.8658129030878
        y: 14.41521559715784
      positionAbsolute:
        x: 1328.8658129030878
        y: 14.41521559715784
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4.1-mini
          provider: langgenius/openai/openai
        prompt_template:
        - id: 56dd5c0f-4f22-42eb-a40d-77c938bab728
          role: system
          text: '# ËßíËâ≤

            ÊÇ®ÊòØ‰∏Ä‰Ωç‰∏•Ë∞®ÁöÑAIÊïôÁ†îÂÜÖÂÆπË¥®Ê£Ä‰∏ìÂÆ∂ÔºåË¥üË¥£ÂØπJSONÊ†ºÂºèÁöÑ‚ÄúÈü≥È¢ëÈÖçÂØπ‚ÄùÈ¢òÂç°Êï∞ÊçÆËøõË°åËá™Âä®ÂåñË¥®ÈáèÂÆ°Ê†∏„ÄÇ


            # ‰ªªÂä°

            ËØ∑ÂØπ‰ª•‰∏ãËæìÂÖ•ÁöÑJSONÊï∞ÊçÆ{{#1753673197346.output#}}ËøõË°å‰∏•Ê†ºÊ†°È™å„ÄÇ


            # Ê†∏ÂøÉÊ†°È™åËßÑÂàô

            1.  **Â≠óÊÆµÂÆåÊï¥ÊÄß‰∏éÊ†ºÂºè**: ÂøÖÈ°ªÂ≠òÂú® `template`, `remark`, `question`, `left_options`,
            `right_options` Â≠óÊÆµ„ÄÇ`answer`Âíå`answer_type`Â≠óÊÆµ‰∏çÂ∫îÂ≠òÂú®„ÄÇ

            2.  **Key‰∏ÄËá¥ÊÄß**: `left_options` ‰∏≠ÁöÑÊâÄÊúâ`key`ÁöÑÈõÜÂêàÔºåÂøÖÈ°ª‰∏é`right_options`‰∏≠ÁöÑÊâÄÊúâ`key`ÁöÑÈõÜÂêàÂÆåÂÖ®Áõ∏Âêå„ÄÇ

            3.  **ÂÜÖÈÉ®ÁªìÊûÑ**: `left_options`‰∏≠ÊØè‰∏™ÂØπË±°ÁöÑ`type`ÂøÖÈ°ªÊòØ`"audio"`„ÄÇ`right_options`‰∏≠ÊØè‰∏™ÂØπË±°ÁöÑ`type`ÂøÖÈ°ªÊòØ`"text"`„ÄÇ

            4.  **ÁøªËØëÂáÜÁ°ÆÊÄß (ÊúÄÈáçË¶Å)**: ÂØπ‰∫é‰ªªÊÑè‰∏Ä‰∏™Áõ∏ÂêåÁöÑkeyÔºåÂú®`left_options`‰∏≠ÊâæÂà∞ËØ•keyÔºàÂÆÉ‰ª£Ë°®‰∏Ä‰∏™Ëã±ÊñáÂçïËØçÔºâÔºåÂú®`right_options`‰∏≠ÊâæÂà∞ÂØπÂ∫îÁöÑ‰∏≠Êñá`text`ÔºåÂà§Êñ≠ÂÆÉ‰ª¨ÊòØÂê¶ÊòØÊ≠£Á°ÆÁöÑÁøªËØëÂÖ≥Á≥ª„ÄÇ


            # ËæìÂá∫Ë¶ÅÊ±Ç

            ËøîÂõûÊ†áÂáÜJSONÊ†ºÂºèÁªìÊûú„ÄÇ

            { "is_valid": bool, "error_details": [], "validated_data": {} }'
        selected: false
        title: 'È¢òÁõÆÂáÜÁ°ÆÊÄßÊ†°È™å '
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1753673132811'
      position:
        x: 2009.2604710189908
        y: 14.41521559715784
      positionAbsolute:
        x: 2009.2604710189908
        y: 14.41521559715784
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: "{% for card in processed_cards %}\n{\n    \"template\": \"t000007\"\
          ,\n    \"remark\": \"Èü≥È¢ëÈÖçÂØπ\",\n    \"type\":\"G\",\n    \"topic_id\":\"{{\
          \ cid }}\",\n    \"topic\":\"{{ topic }}\",\n    \"level\":\"{{ level }}\"\
          ,\n    \"vocabulary_group\":\"A\",\n    \"question\": [\n        {\n   \
          \         \"role\": \"theme_with_image\",\n            \"type\": \"image_eng_audio\"\
          ,\n            \"eng\": \"{{ card['theme_phrase'] | e }}\",\n          \
          \  \"audio_url\": true,\n            \"image_url\": true\n        }\n  \
          \   ],\n    \"title\": \"ÈÄâÊã©ÈÖçÂØπ\", \n    \"title_position\": 2, \n    \"answer_input\"\
          : \"match\", \n    \"left_options\": {{ card['left_options'] | tojson }},\n\
          \    \"right_options\": {{ card['right_options'] | tojson }}\n}\n{% if not\
          \ loop.last %},{% endif %}\n{% endfor %}"
        title: ÁîüÊàêÊúÄÁªàJSON 1
        type: template-transform
        variables:
        - value_selector:
          - '1753673086906'
          - processed_cards
          variable: processed_cards
        - value_selector:
          - '1753336166559'
          - topic
          value_type: string
          variable: topic
        - value_selector:
          - '1753336166559'
          - level
          value_type: string
          variable: level
        - value_selector:
          - '1753336166559'
          - cid
          value_type: string
          variable: cid
      height: 54
      id: '1753673197346'
      position:
        x: 1667.8211984834427
        y: 14.415215597157882
      positionAbsolute:
        x: 1667.8211984834427
        y: 14.415215597157882
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        selected: false
        template: '{% for card in processed_cards %}

          ## ‚ùè Âç°ÁâáÂÆ°Ê†∏Ê∏ÖÂçï (Èü≥È¢ëÈÖçÂØπ)


          ---


          ### **1. Ê†∏ÂøÉÂÜÖÂÆπ**

          - **‰∏ªÈ¢òÁü≠ËØ≠**: {{ card[''theme_phrase''] }}

          - **Ê®°ÊùøÁ±ªÂûã**: `t000007` (Èü≥È¢ëÈÖçÂØπ)


          ### **2. ÈÖçÂØπËØçÊ±áÂàóË°® (ÂÆ°Ê†∏ÂëòËØ∑Ê£ÄÊü•ÁøªËØëÊòØÂê¶ÂáÜÁ°Æ)**


          | Ëã±Êñá (English) | ‰∏≠Êñá (Chinese) |

          | :--- | :--- |

          {% for left_item in card[''left_options''] %}

          {% set current_key = left_item[''key''] %}

          {% for right_item in card[''right_options''] if right_item[''key''] == current_key
          %}

          | {{ left_item[''key''] }} | {{ right_item[''text''] }} |

          {% endfor %}

          {% endfor %}


          ### **3. Ê†°È™åË¶ÅÁÇπ**

          - [ ] ‰∏ªÈ¢òÁü≠ËØ≠ÊòØÂê¶‰∏éËØçÊ±áÁõ∏ÂÖ≥Ôºü

          - [ ] ÊâÄÊúâ‰∏≠Ëã±ÊñáÁøªËØëÊòØÂê¶ÂáÜÁ°Æ„ÄÅÂú∞ÈÅìÔºü

          - [ ] ËØçÊ±áÈöæÂ∫¶ÊòØÂê¶Á¨¶ÂêàËÆæÂÆöÁöÑËØ≠Ë®ÄÁ≠âÁ∫ßÔºü


          {% if not loop.last %}

          ========================================

          {% endif %}

          {% endfor %}'
        title: ‰∫∫Â∑•ÂÆ°Ê†∏Ê†ºÂºèËΩ¨Êç¢-10
        type: template-transform
        variables:
        - value_selector:
          - '1753673086906'
          - processed_cards
          variable: processed_cards
      height: 54
      id: '17536732746160'
      position:
        x: 2328.156505206653
        y: 14.41521559715784
      positionAbsolute:
        x: 2328.156505206653
        y: 14.41521559715784
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import random\nimport time\nimport json\n\ndef main(llm_string_output:\
          \ str) -> dict:\n    processed_scenarios = []\n    \n    try:\n        data\
          \ = json.loads(llm_string_output)\n        scenarios_list = data.get(\"\
          scenarios\", [])\n    except json.JSONDecodeError:\n        return {\"error\"\
          : f\"Input string is not a valid JSON. Content: {llm_string_output}\", \"\
          processed_scenarios\": []}\n\n    if not scenarios_list:\n        return\
          \ {\"error\": \"No scenarios found in the parsed JSON.\", \"processed_scenarios\"\
          : []}\n\n    for scenario in scenarios_list:\n        try:\n           \
          \ # --- START: Êú¨Ê¨°‰∏ªË¶Å‰øÆÊîπÂå∫Âüü ---\n            dialogue_turns = scenario.get(\"\
          dialogue_turns\", [])\n            formatted_question_list = []\n      \
          \      speaker_map = {}\n            for i, turn in enumerate(dialogue_turns):\n\
          \                speaker = turn.get(\"speaker\")\n                if speaker\
          \ not in speaker_map:\n                    role = \"left_girl\" if len(speaker_map)\
          \ % 2 == 0 else \"right_girl\"\n                    speaker_map[speaker]\
          \ = role\n\n                formatted_question_list.append({\n         \
          \           \"role\": speaker_map[speaker],\n                    \"type\"\
          : \"eng_cn_audio\",\n                    \"eng\": turn.get(\"line\", \"\"\
          ),\n                    \"audio_url\": True\n                })\n      \
          \      # --- END: Êú¨Ê¨°‰∏ªË¶Å‰øÆÊîπÂå∫Âüü ---\n\n            processed_scenario = {\n \
          \               \"question_turns\": formatted_question_list, # ‰º†ÈÄíÂ§ÑÁêÜÂ•ΩÁöÑÂØπËØùÂàóË°®\n\
          \                \"dialogue_turns_text_only\": dialogue_turns, # ‰øùÁïôÂéüÂßãÂØπËØùÁî®‰∫éÂÆ°Ê†∏\n\
          \                \"prompt_for_user_cn\": scenario.get(\"prompt_for_user_cn\"\
          , \"\"),\n                \"correct_answer_en\": scenario.get(\"correct_answer_en\"\
          , \"\")\n            }\n            processed_scenarios.append(processed_scenario)\n\
          \n        except Exception as e:\n            print(f\"Error processing\
          \ a scenario: {e}\")\n            continue\n            \n    return {\"\
          processed_scenarios\": processed_scenarios}"
        code_language: python3
        desc: ''
        outputs:
          processed_scenarios:
            children: null
            type: array[object]
        selected: false
        title: Âú∫ÊôØÂ§ÑÁêÜ
        type: code
        variables:
        - value_selector:
          - '1753346134162'
          - text
          variable: llm_string_output
      height: 54
      id: '1753759688876'
      position:
        x: 1328.8658129030878
        y: 1154.2996047244285
      positionAbsolute:
        x: 1328.8658129030878
        y: 1154.2996047244285
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1753673197346'
          - output
          variable: Èü≥È¢ëÈÖçÂØπ
        - value_selector:
          - '1753672437742'
          - output
          variable: ÂØπËØùÁêÜËß£
        - value_selector:
          - '17536688854790'
          - output
          variable: Âê¨Èü≥ÈáçÁªÑ
        - value_selector:
          - '1753342086794'
          - output
          variable: ÈÄâÊã©Â∫îÁ≠î
        - value_selector:
          - '17533461952642'
          - output
          variable: Âè£ËØ≠Â∫îÁ≠î
        selected: false
        title: ÁªìÊùü 6
        type: end
      height: 194
      id: '1754286021242'
      position:
        x: 2736.3415211040106
        y: 542.5780756868085
      positionAbsolute:
        x: 2736.3415211040106
        y: 542.5780756868085
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 285.28755053450914
      y: 90.50526141403597
      zoom: 0.32113052002740944
